(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],f=0,d=[];f<o.length;f++)i=o[f],r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={"app~f075b844":0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors~0f485567","chunk-vendors~2a42e354","chunk-vendors~6b994d92","chunk-vendors~33a18b39","chunk-vendors~d21988b8","chunk-vendors~b5906859","chunk-vendors~db300d2f","chunk-vendors~67b22fc5","chunk-vendors~7d359b94","chunk-vendors~9c5b28f6","chunk-vendors~7cb01e1c","chunk-vendors~f9ca8911","chunk-vendors~1c3a2c3f","chunk-vendors~fdc6512a","chunk-vendors~bd2a49b8","chunk-vendors~ed3ae789","chunk-vendors~6d61af90","chunk-vendors~1058c78a","chunk-vendors~0605657e","chunk-vendors~e1ee825c","chunk-vendors~69023aca","chunk-vendors~138ba054"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0767":function(t,e,n){"use strict";var a=n("29be"),r=n.n(a);r.a},1:function(t,e){},"15a2":function(t,e,n){"use strict";var a=n("c6bf"),r=n.n(a);r.a},"17d9":function(t,e,n){"use strict";var a=n("ad79"),r=n.n(a);r.a},"1a02":function(t,e,n){},"1aa8":function(t,e){},"1d4e":function(t,e,n){},2:function(t,e){},2301:function(t,e,n){"use strict";var a=n("1a02"),r=n.n(a);r.a},2962:function(t,e,n){"use strict";var a=n("54d4"),r=n.n(a);r.a},"29be":function(t,e,n){},"303a":function(t,e,n){"use strict";var a=n("45e3"),r=n.n(a);r.a},"3ee0":function(t,e,n){},"3f2e":function(t,e){t.exports={stream_data_one:"http://localhost:3000/live/streams/one/480p.m3u8",stream_data_two:"http://localhost:3000/live/streams/two/480p.m3u8",socket_io_addr:"http://localhost:3001"}},"43dd":function(t,e){},"45e3":function(t,e,n){},"4aee":function(t,e){function n(t){Object.assign(this,n.template,t)}Object.defineProperty(n,"template",{get:function(){return{bbox_height:"",bbox_width:"",bbox_xmin:"",bbox_ymin:"",camera:null,classification_description:null,classified_by:null,eventId:null,id:"",image_filename:"",image_filepath:"",image_height:"",image_width:"",inferenced_classification:"",inferenced_percentage:"",modified_date:null,thumb_filename:"",thumb_filepath:"",thumb_250x250:null,thumb_height:null,thumb_width:null,user_classification:null,video_clip_filepath:null,video_clip_name:null}}}),t.exports=n},"4d48":function(t,e,n){"use strict";var a=n("9f43"),r=n.n(a);r.a},"53a9":function(t,e){},"54d4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var a=n("2b0e"),r=n("ce5b"),s=n.n(r);n("bf40");a["default"].use(s.a,{theme:{primary:"#FFF",primaryLight:"#f2f2f2",primaryDark1:"#e2e2e2",primaryDark2:"#cccccc",buttonBlack:"#141414",secondary:"#424242",secondaryDark:"#1D1D1D",border:"#4D4D4D",accent:"#D91111",error:"#D91111",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",classification:"#F2F2F2"},options:{customProperties:!0},iconfont:"fa"});var i=n("59ca"),o=n.n(i),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative"},attrs:{id:"app"}},[t.$alert.muteDuration?t._e():n("v-alert",{directives:[{name:"flash",rawName:"v-flash",value:t.$alert.showHeader,expression:"$alert.showHeader"}],staticStyle:{"margin-top":"0px",position:"absolute",top:"0",left:"0",right:"0",height:"58px","z-index":"200","background-color":"'red'"},attrs:{value:t.$alert.showHeader,transition:"slide-y-transition"},on:{click:function(e){return t.$router.push("/events")}}},[n("v-layout",{staticStyle:{position:"relative"},attrs:{"align-center":"","justify-center":""}},[n("span",{staticClass:"text-xs-center mb-0 mr-2 alert-text"},[t._v(t._s(t.formatAlertText))]),t.$alert.alertData?n("img",{attrs:{src:"/assets/images/icon-alert-"+t.$alert.alertData.inferenced_classification+".svg"}}):t._e(),n("v-btn",{staticClass:"clear-alert-btn",attrs:{dark:"",flat:"",small:""},on:{click:function(e){return t.$alert.hideAlertHeader()}}},[t._v("TURN OFF ALARM")])],1)],1),n("v-app",{attrs:{id:"inspire"}},[n("app-header"),n("v-content",{staticClass:"app-container",attrs:{app:""}},[n("v-container",{attrs:{fluid:"","fill-height":"","pa-0":""}},[n("router-view")],1)],1),n("notifications",{staticStyle:{top:"20%"},attrs:{group:"classification-notifications",max:1,speed:300,width:250,duration:300,"animation-type":"velocity",animation:t.animation,position:"center center"},scopedSlots:t._u([{key:"body",fn:function(e){return n("div",{},[n("div",{staticStyle:{display:"flex","font-family":"'DIN Condensed'","font-size":"30px","background-color":"#F2F2F2",color:"black",padding:"20px","letter-spacing":"2.5px"}},[n("p",{staticClass:"mb-0 mx-auto"},[t._v(t._s(e.item.text))])])])}}])}),n("notifications",{staticStyle:{bottom:"5%",right:"5%"},attrs:{group:"app-notifications",max:1,duration:3e3,position:"right bottom"},scopedSlots:t._u([{key:"body",fn:function(e){return n("div",{},[n("v-alert",{staticStyle:{"font-family":"'DIN Condensed'","font-size":"18px","letter-spacing":"2px"},attrs:{color:e.item.type},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(t._s(e.item.text))])],1)}}])})],1)],1)},l=[],u=n("1e5c"),f=n("8055"),d=n.n(f),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$auth.status.loggedIn?n("div",{staticClass:"app-toolbar"},[n("v-tabs",{staticClass:"tab-container",attrs:{centered:""}},[n("v-tabs-slider",{staticStyle:{height:"5px"},attrs:{color:"red"}}),n("app-hamburger-menu"),n("v-spacer"),n("v-tab",{attrs:{to:"/overview",exact:""}},[n("h2",{staticClass:"nav-btn"},[t._v("Live Feed")])]),n("v-tab",{staticStyle:{position:"relative"},attrs:{to:"/events",exact:""}},[n("h2",{staticClass:"nav-btn"},[t._v("Events")]),t.$alert.alerts.length>0?n("v-badge",{staticStyle:{position:"absolute",top:"12px",right:"26px"},attrs:{color:t.$vuetify.theme.accent}},[n("span",{attrs:{slot:"badge"},slot:"badge"})]):t._e()],1),n("v-tab",{attrs:{to:"/archive",exact:""}},[n("h2",{staticClass:"nav-btn"},[t._v("Archive")])]),n("v-spacer")],1)],1):t._e()},v=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-container"},[n("v-menu",{attrs:{offsetY:"",transition:"slide-x-transition","mt-3":"",bottom:"",right:"","nudge-width":200,"close-on-click":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-icon",t._g({staticClass:"burger"},a),[t._v("fas fa-bars")])]}}])},[n("v-card",{staticClass:"menu-list-container"},[n("div",{staticClass:"menu-list-btn",on:{click:function(e){return t.logout()}}},[n("p",{staticClass:"mb-0"},[t._v("Logout")])])])],1)],1)},h=[],y=n("a34a"),g=n.n(y);function b(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function E(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){b(s,a,r,i,o,"next",t)}function o(t){b(s,a,r,i,o,"throw",t)}i(void 0)})}}var x={methods:{logout:function(){var t=E(g.a.mark(function t(){return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$auth.logout();case 2:this.$router.replace("/sign_in");case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},_=x,C=(n("b340"),n("2877")),w=Object(C["a"])(_,m,h,!1,null,"3d683308",null),k=w.exports,A=n("4aee"),S=n.n(A),T={components:{"app-hamburger-menu":k},data:function(){return{tab:null}},methods:{createDummyAlarm:function(){this.$alert.createAlert(new S.a({inferenced_classification:"Coyote",camera:"east"}))}}},O=T,R=(n("6f8b"),Object(C["a"])(O,p,v,!1,null,"4b80240e",null)),$=R.exports,I=n("3f2e"),L=n.n(I),D={name:"App",components:{"app-header":$},mounted:function(){var t=this;this.sound=new u["Howl"]({src:"./assets/sound/alarm.mp3",autoplay:!1,loop:!1,volume:1,onend:function(){}}),this.checkEnv(),this.socket.on("TRIGGER_ALARM",function(e){t.$alert.createAlert(e),t.$alert.muteDuration||t.sound.play()})},data:function(){return{socket:d()(L.a.socket_io_addr),sound:null,alert:!0,tab:null,animation:{enter:function(){return{translateY:[0,220],opacity:[1,0]}},leave:{translateY:-30,height:0,opacity:0}}}},methods:{checkEnv:function(){this.$nextTick(function(){console.log("CHECK ENV",Object({VUE_APP_API_KEY:"AIzaSyA9MCMFIt8lktFw3tNXnz-gGX3_Z-bJNMM",VUE_APP_AUTH_DOMAIN:"wiley-app-rotf.firebaseapp.com",VUE_APP_DATABASE_URL:"https://wiley-app-rotf.firebaseio.com",VUE_APP_PROJECT_ID:"wiley-app-rotf",VUE_APP_STORAGE_BUCKET:"wiley-app-rotf.appspot.com",VUE_APP_MESSAGING_SENDER_ID:"605895775958",VUE_APP_APP_ID:"1:605895775958:web:9cfcc726493bd0d8",VUE_APP_FILESERVER_BASE_URL:"http://localhost:3000",VUE_APP_API_BASE_URL:"http://localhost:3001/api",NODE_ENV:"production",VUE_APP_WOWZA_LICENSE:"PLAY2-4bztc-xeKHf-WU6YT-kmf8V-VcGeZ",BASE_URL:"/"}))})}},computed:{formatAlertText:function(){var t=this.$alert.alertData;return t&&"".concat(t.inferenced_classification.toUpperCase())}}},F=D,N=(n("2962"),n("a4f9")),P=n.n(N),j=Object(C["a"])(F,c,l,!1,null,"2b7cfab0",null);"function"===typeof P.a&&P()(j);var M=j.exports,U=n("8c4f"),H=(n("ea7b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$events.loading?n("v-container",{staticClass:"history-container",attrs:{"fill-height":"",fluid:"","pa-0":"","ml-0":"","mr-0":""}},[n("app-loading-spinner")],1):t.unclassifiedRemaining?n("v-layout",{staticClass:"video-container",attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("span",{staticStyle:{color:"white","font-family":"'DIN Condensed'","font-size":"28px"}},[t._v(t._s(t.currentEventIndex+1+"/"+(t.$events.sessionEvents&&t.unclassifiedEvents.length)))])]),n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs2:""}},[n("v-layout",{attrs:{"justify-start":"","align-center":""}},[n("v-btn",{staticClass:"prevBtn",attrs:{flat:"",large:""},on:{click:function(e){return t.goBack()}}},[t._v("Previous")])],1)],1),n("v-flex",{staticClass:"video-feed-wrapper",attrs:{xs8:""}},[n("div",{staticClass:"red-border"},[n("details--camera-image",{ref:"cameraImage",attrs:{source:t.currentEvent},on:{datauricreated:function(e){return t.setThumb(e)}}})],1)]),n("v-flex",{attrs:{xs2:""}},[n("v-layout",{attrs:{"justify-end":"","align-center":""}},[n("v-btn",{staticClass:"nextBtn",attrs:{flat:"",large:""},on:{click:function(e){return t.goNext()}}},[t._v("Next/Skip")])],1)],1)],1),n("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[n("v-flex",{staticClass:"text--center white--text",attrs:{xs10:""}},[n("p",{staticStyle:{"font-family":"Montserrat","font-size":"14px","font-weight":"700"}},[t._v("SELECT OR USE YOUR KEYBOARD")])]),n("v-layout",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"bottom-buttons-container",expression:"'bottom-buttons-container'"}],attrs:{"justify-space-between":""}},[n("v-flex",{attrs:{"mx-1":""}},[n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",style:t.selected("employee"),attrs:{flat:"",large:""},on:{click:function(e){return t.setClassification("employee")}}},[t._v("\n            employee\n            "),n("span",{staticClass:"control-numeral"},[t._v("1")])]),n("p",{staticClass:"control-text text-xs-center"},[t._v(t._s(t.getTotalByType("employee")))])],1),n("v-flex",{attrs:{"mx-1":""}},[n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",style:t.selected("train"),attrs:{flat:"",large:""},on:{click:function(e){return t.setClassification("train")}}},[t._v("\n            train\n            "),n("span",{staticClass:"control-numeral"},[t._v("2")])]),n("p",{staticClass:"control-text text-xs-center"},[t._v(t._s(t.getTotalByType("train")))])],1),n("v-flex",{attrs:{"mx-1":""}},[n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",style:t.selected("intruder"),attrs:{flat:"",large:""},on:{click:function(e){return t.setClassification("intruder")}}},[t._v("\n            intruder\n            "),n("span",{staticClass:"control-numeral"},[t._v("3")])]),n("p",{staticClass:"control-text text-xs-center"},[t._v(t._s(t.getTotalByType("intruder")))])],1),n("v-flex",{attrs:{"mx-1":""}},[n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",style:t.selected("animal"),attrs:{flat:"",large:""},on:{click:function(e){return t.setClassification("animal")}}},[t._v("\n            animal\n            "),n("span",{staticClass:"control-numeral"},[t._v("4")])]),n("p",{staticClass:"control-text text-xs-center"},[t._v(t._s(t.getTotalByType("animal")))])],1),n("v-flex",{attrs:{"mx-1":""}},[n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",style:t.selected("false-alarm"),attrs:{flat:"",large:""},on:{click:function(e){return t.openFalseAlarmModal()}}},[t._v("\n            false alarm\n            "),n("span",{staticClass:"control-numeral"},[t._v("5")])]),n("p",{staticClass:"control-text text-xs-center"},[t._v(t._s(t.getTotalByType("false-alarm")))])],1)],1)],1)],1),n("app-dialog",{ref:"falsealarm",attrs:{"max-width":"500",lazy:""},on:{closed:function(e){return t.addListeners()},opened:function(e){return t.focusTextarea()}}},[n("template",{slot:"modaltitle"},[t._v("CONFIRM FALSE ALARM?")]),n("template",{slot:"modalcontent"},[n("v-textarea",{ref:"falsealarmtextarea",staticClass:"textarea",attrs:{dark:"","background-color":"transparent",rows:"6","auto-grow":"",placeholder:"Please leave a reason for registering this event as a false alarm"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.newline(e):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.setFalseAlarmClassification("false-alarm")}},model:{value:t.classificationDescription,callback:function(e){t.classificationDescription=e},expression:"classificationDescription"}})],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.setFalseAlarmClassification("false-alarm")}},slot:"detailsButton"},[t._v("Confirm")])],2)],1):n("v-layout",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"container",expression:"'container'"}],staticClass:"video-container",attrs:{"justify-center":"","fill-height":"","align-center":""}},[n("span",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"empty-content",expression:"'empty-content'"}],staticStyle:{color:"white","font-family":"DIN Condensed","font-size":"30px"}},[t._v("THERE ARE NO UNCLASSIFIED EVENTS")])])}),z=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"images-container",class:t.zoomed?"zoom-out-cursor":"zoom-in-cursor"},[n("transition",{attrs:{appear:"",name:"fade",mode:"out-in",duration:100}},[n("svg",{directives:[{name:"show",rawName:"v-show",value:t.pngDataUrl,expression:"pngDataUrl"}],ref:"dummyImage",staticClass:"svg-responsive",staticStyle:{"z-index":"2020"},style:t.setScale,attrs:{viewBox:"0 0 640 480",preserveAspectRatio:"none",id:"svgimage"},on:{click:function(e){return t.zoom()}}},[n("g",[n("image",{attrs:{"xlink:href":t.pngDataUrl,height:t.source.image_height,width:t.source.image_width}}),n("rect",{attrs:{x:t.source.bbox_xmin,y:t.source.bbox_ymin,width:t.source.bbox_width,height:t.source.bbox_height,fill:"transparent",stroke:"red","stroke-width":"5"}}),n("rect",{attrs:{x:t.source.bbox_xmin,y:t.source.bbox_ymin,width:"80",height:"20",fill:"red"}}),n("text",{attrs:{x:+t.source.bbox_xmin+4,y:+t.source.bbox_ymin+14,"font-family":"DIN Condensed","font-size":"14",fill:"black"}},[t._v(t._s(t.source.inferenced_classification)+" "+t._s((100*+t.source.inferenced_percentage).toFixed(0))+"%")])])])])],1)},G=[],K={props:{source:{type:Object,required:!1,default:function(){}}},data:function(){return{zoomed:!1,pngDataUrl:null}},mounted:function(){var t=this;this.toDataURL("".concat("http://localhost:3000","/").concat(this.source.image_filepath,"/").concat(this.source.image_filename)).then(function(e){t.pngDataUrl=e,setTimeout(function(){t.convertSvgToPng()},1e3)})},methods:{getPathZoomed:function(){return this.source.staticImageZoomed},toDataURL:function(t){return fetch(t).then(function(t){return t.blob()}).then(function(t){return new Promise(function(e,n){var a=new FileReader;a.onloadend=function(){e(a.result)},a.onerror=n,a.readAsDataURL(t)})})},convertSvgToPng:function(){var t=this,e=document.querySelector("#svgimage"),n=(new XMLSerializer).serializeToString(e),a=document.createElement("canvas");a.width=250,a.height=250;var r=a.getContext("2d"),s=new Image;s.onload=function(){r.drawImage(s,0,0);var e=a.toDataURL("image/png");t.$emit("datauricreated",e)};var i="data:image/svg+xml;base64,".concat(btoa(n));s.setAttribute("src",i)},zoom:function(){this.zoomed=!this.zoomed},zoomOut:function(){this.zoomed&&(this.zoomed=!1)}},computed:{setScale:function(){if(this.zoomed){var t=document.querySelector("#svgimage").getBoundingClientRect(),e=+this.source.image_width/2-(+this.source.bbox_xmin+ +this.source.bbox_width/2),n=+this.source.image_height/2-(+this.source.bbox_ymin+ +this.source.bbox_height/2),a=e<0,r=n<0,s=Math.abs(e)>t.width/4?a?-t.width/4:t.width/4:e,i=Math.abs(n)>t.height/4?r?-t.height/4:t.height/4:n;return"transform: scale(2) translate(".concat(s,"px, ").concat(i,"px)")}return""}},watch:{source:function(){var t=this;this.toDataURL("".concat("http://localhost:3000","/").concat(this.source.image_filepath,"/").concat(this.source.image_filename)).then(function(e){t.pngDataUrl=e,setTimeout(function(){t.convertSvgToPng()},1e3)})}}},V=K,Y=(n("17d9"),n("9f2b")),q=n.n(Y),W=Object(C["a"])(V,B,G,!1,null,"a518fdb0",null);"function"===typeof q.a&&q()(W);var Z=W.exports,J=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},X=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"rect1"}),n("div",{staticClass:"rect2"}),n("div",{staticClass:"rect3"}),n("div",{staticClass:"rect4"}),n("div",{staticClass:"rect5"})])}],Q=(n("b7c1"),{}),tt=Object(C["a"])(Q,J,X,!1,null,"7f297852",null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{ref:"dialog",staticStyle:{"z-index":"2000"},attrs:{persistent:t.isLoading||t.persistent,lazy:t.lazy,"max-width":t.maxWidth,flat:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-dialog",{attrs:{lazy:"",persistent:"","fill-height":"","content-class":"elevation-0"},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("p",{staticClass:"text-xs-center pt-4"},[n("v-progress-circular",{attrs:{size:70,width:7,indeterminate:"",lazy:"",color:"white"}})],1)]),t._t("default",[n("v-card",{attrs:{color:"transparent",flat:""}},[n("v-layout",{attrs:{"align-center":"","justify-space-between":""}},[n("v-card-title",{staticClass:"mb-0 pb-0"},[n("h2",{staticClass:"ml-1",staticStyle:{display:"inline",color:"#FFF","font-family":"DIN Condensed","font-weight":"700","letter-spacing":"5px"}},[t._t("modaltitle")],2)]),t.isLoading||t.persistent?t._e():n("v-icon",{staticClass:"right mt-3 mr-3",attrs:{dark:""},on:{click:function(e){return e.stopPropagation(),t.close(e)}}},[t._v("fas fa-times")])],1),n("v-card-text",{staticClass:"modal-content"},[t._t("modalcontent")],2),n("v-card-actions",[t._t("cancelbutton"),n("span",{staticClass:"ml-2"},[t.isLoading?t._e():t._t("actionbuttons")],2),n("v-spacer"),n("span",{staticClass:"mr-2",attrs:{right:""}},[t._t("detailsButton")],2)],2)],1)])],2)},at=[],rt={props:{persistent:{type:Boolean,required:!1,default:!1},lazy:{type:Boolean,required:!1,default:!1},maxWidth:{type:String,required:!1,default:void 0}},data:function(){return{isOpen:!1,isLoading:!1}},methods:{open:function(){this.isOpen=!0,this.$emit("opened")},close:function(){this.isOpen=!1,this.$emit("closed")},startLoading:function(){this.isLoading=!0},stopLoading:function(){this.isLoading=!1}}},st=rt,it=(n("15a2"),Object(C["a"])(st,nt,at,!1,null,null,null)),ot=it.exports;function ct(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function lt(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){ct(s,a,r,i,o,"next",t)}function o(t){ct(s,a,r,i,o,"throw",t)}i(void 0)})}}var ut={components:{"details--camera-image":Z,"app-dialog":ot,"app-loading-spinner":et},data:function(){return{unclassifiedEvents:[],unclassifiedRemaining:0,listeners:null,disabled:!1,currentEventIndex:0,currentEvent:{},classificationDescription:""}},created:function(){var t=this;this.getFiftyEvents(),this.listeners=function(e){"1"===String.fromCharCode(e.keyCode)||97===e.keyCode?t.setClassification("employee"):"2"===String.fromCharCode(e.keyCode)||98===e.keyCode?t.setClassification("train"):"3"===String.fromCharCode(e.keyCode)||99===e.keyCode?t.setClassification("intruder"):"4"===String.fromCharCode(e.keyCode)||100===e.keyCode?t.setClassification("animal"):"5"===String.fromCharCode(e.keyCode)||101===e.keyCode?t.openFalseAlarmModal():32===e.keyCode?t.$refs.cameraImage.zoom():39===e.keyCode?t.goNext():37===e.keyCode&&t.goBack()},this.addListeners()},destroyed:function(){this.removeListeners()},computed:{unclassifiedEventsCount:function(){return this.$events.sessionEvents.reduce(function(t,e){return e.user_classification||t++,t},0)}},methods:{setThumb:function(t){this.currentEvent.thumb_250x250=null},addListeners:function(){window.addEventListener("keyup",this.listeners)},removeListeners:function(){window.removeEventListener("keyup",this.listeners)},goBack:function(){this.currentEventIndex=this.crawlArray(this.unclassifiedEvents,this.currentEventIndex,-1),this.currentEvent=this.unclassifiedEvents[this.currentEventIndex],this.$refs.cameraImage.zoomOut()},goNext:function(){var t=this;this.unclassifiedRemaining>0&&(this.currentEventIndex=this.crawlArray(this.unclassifiedEvents,this.currentEventIndex,1),this.currentEvent=this.unclassifiedEvents[this.currentEventIndex],this.$refs.cameraImage.zoomOut(),setTimeout(function(){t.disabled=!1},900)),this.unclassifiedRemaining=this.unclassifiedEventsCount},crawlArray:function(t,e,n){return((e+n)%t.length+t.length)%t.length},setFalseAlarmClassification:function(t){this.$refs.falsealarm.close(),this.addListeners(),this.setClassification(t)},setClassification:function(t){this.disabled=!0,this.currentEvent.user_classification=t,this.currentEvent.classification_description=this.classificationDescription,this.currentEvent.classified_by=this.$auth.user.email,this.classificationDescription="",this.updateEvent(this.currentEvent)},updateEvent:function(){var t=lt(g.a.mark(function t(e){var n,a=this;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$events.updateEvent(e);case 3:if(n=t.sent,!n.status||500!==n.status){t.next=7;break}return this.$notifyError("ERROR GETTING TODAYS EVENTS. PLEASE TRY AGAIN LATER"),t.abrupt("return");case 7:this.$notifyClassification(e.user_classification.toUpperCase()),setTimeout(function(){a.goNext()},950),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.disabled=!1,console.error("ERROR CLASSIFYING EVENT",t.t0),this.$notifyError("ERROR CLASSIFYING EVENT. PLEASE TRY AGAIN LATER.");case 16:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}(),getFiftyEvents:function(){var t=lt(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$events.startLoading(),t.prev=1,t.next=4,this.$events.getFiftyEvents();case 4:if(e=t.sent,!e.status||500!==e.status){t.next=8;break}return this.$notifyError("ERROR GETTING TODAYS EVENTS. PLEASE TRY AGAIN LATER"),t.abrupt("return");case 8:this.setUnclassifiedEvents(e),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error("ERROR GETTING ALL EVENTS",t.t0),this.$notifyError("ERROR GETTING HISTORICAL EVENTS. PLEASE TRY AGAIN LATER.");case 15:case"end":return t.stop()}},t,this,[[1,11]])}));function e(){return t.apply(this,arguments)}return e}(),setUnclassifiedEvents:function(t){this.unclassifiedEvents=t.filter(function(t){return!t.user_classification}),this.unclassifiedRemaining=this.unclassifiedEvents.length,this.unclassifiedEvents.length>0&&(this.currentEvent=this.unclassifiedEvents[0]),this.$events.stopLoading()},getTotalByType:function(t){return this.$events.sessionEvents.reduce(function(e,n){return n.user_classification===t&&e++,e},0)},selected:function(t){return this.unclassifiedEvents[this.currentEventIndex]&&this.unclassifiedEvents[this.currentEventIndex].user_classification===t?"filter: invert(1);":""},openFalseAlarmModal:function(){this.removeListeners(),this.$refs.falsealarm.open()},focusTextarea:function(){var t=this;this.$nextTick(function(){t.$refs.falsealarmtextarea.focus()})},newline:function(){this.classificationDescription="".concat(this.classificationDescription,"\n")}}},ft=ut,dt=(n("b370"),n("61db")),pt=n.n(dt),vt=Object(C["a"])(ft,H,z,!1,null,"7c32e3dd",null);"function"===typeof pt.a&&pt()(vt);var mt=vt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$events.loading?n("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":"","ml-0":"","mr-0":""}},[n("app-loading-spinner")],1):t.eventsRemaining?n("v-container",{staticClass:"events-container",attrs:{fluid:"","fill-height":"","pa-0":"","pt-2":"","ma-0":""}},[n("v-layout",{attrs:{"align-start":""}},[n("v-flex",{attrs:{xs4:"","pl-3":"","pr-0":""}},[n("span",{staticStyle:{color:"#FFF","font-size":"24px"}},[t._v("EVENTS "+t._s(this.totalEventsCount||0))]),n("v-flex",{staticClass:"list-container",on:{scroll:t.onScroll}},t._l(t.events,function(e,a){return n("events--active-list-item",{key:e.id+"idx"+a,attrs:{event:e,selected:t.currentEvent.id},on:{selected:function(e){return t.setCurrentEvent(e)}}})}),1)],1),n("v-flex",{staticStyle:{position:"relative",padding:"0px 65px 0"},attrs:{xs8:""}},[n("v-btn",{staticStyle:{position:"absolute",top:"0",right:"64px","z-index":"2020"},attrs:{dark:"",small:""},on:{click:function(e){t.videoShowing=!t.videoShowing}}},[t._v(t._s(t.videoShowing?"SHOW IMAGE":"PLAY VIDEO"))]),t.videoShowing?n("div",{staticStyle:{"margin-bottom":"6px"}},[n("video-player",{attrs:{fallbackImageUrl:t.createFallbackImageUrl,options:t.getVideoOptions()}})],1):n("details--camera-image",{ref:"cameraImage",attrs:{source:t.currentEvent},on:{showvideo:t.showVideo}}),n("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[n("v-flex",{staticClass:"text--center white--text"},[n("p",{staticStyle:{"font-family":"Montserrat","font-size":"14px","font-weight":"700"}},[t._v("SELECT OR USE YOUR KEYBOARD")])]),n("v-layout",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"bottom-buttons-container",expression:"'bottom-buttons-container'"}],attrs:{wrap:"","justify-space-between":""}},t._l(t.buttonTypes,function(e,a){return n("events--class-button",{key:e.type+a,attrs:{type:e,index:a,disabled:!1},on:{classification:function(e){return t.setClassification(e)}}})}),1)],1)],1)],1),n("app-dialog",{ref:"falsealarm",attrs:{"max-width":"500",lazy:""},on:{closed:function(e){return t.addListeners()},opened:function(e){return t.focusTextarea()}}},[n("template",{slot:"modaltitle"},[t._v("CONFIRM FALSE ALARM?")]),n("template",{slot:"modalcontent"},[n("v-textarea",{ref:"falsealarmtextarea",staticClass:"textarea",attrs:{dark:"","background-color":"transparent",rows:"6","auto-grow":"",placeholder:"Please leave a reason for registering this event as a false alarm"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.newline(e):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.setFalseAlarmClassification("false-alarm")}},model:{value:t.classification_description,callback:function(e){t.classification_description=e},expression:"classification_description"}})],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.setFalseAlarmClassification("false-alarm")}},slot:"detailsButton"},[t._v("Confirm")])],2)],1):n("v-layout",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"container",expression:"'container'"}],staticClass:"events-container",attrs:{"justify-center":"","fill-height":"","align-center":""}},[n("span",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"empty-content",expression:"'empty-content'"}],staticStyle:{color:"white","font-family":"DIN Condensed","font-size":"30px"}},[t._v("THERE ARE NO UNCLASSIFIED EVENTS")])])},yt=[],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{class:t.disabled?"control-btn disabled":"control-btn",staticStyle:{"letter-spacing":"0.5px"},attrs:{flat:"",large:""},on:{click:function(e){return t.$emit("classification",t.type.val)}}},[t._v("\n    "+t._s(t.type.type)+"\n    "),n("span",{staticClass:"control-numeral"},[t._v(t._s(t.index+1))])])},bt=[],Et={props:{type:{type:Object,require:!0},disabled:{type:Boolean,required:!0},index:{type:Number,required:!0}}},xt=Et,_t=(n("9244"),Object(C["a"])(xt,gt,bt,!1,null,"66886342",null)),Ct=_t.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("v-layout",{attrs:{row:"",wrap:"","mb-2":""}},[n("app-list-item",{attrs:{event:t.event,selected:t.selected==t.event.id},on:{selected:function(e){return t.$emit("selected",e)}}},[n("v-img",{staticClass:"app-list-item-image",attrs:{slot:"list-image",contain:"","aspect-ratio":1,src:t.event&&t.generateThumbUrl(t.event)},slot:"list-image"}),n("span",{staticClass:"app-list-item-classification",attrs:{slot:"list-info-top-left"},slot:"list-info-top-left"},[t._v(t._s(t.event.inferenced_classification.toUpperCase())+" DETECTED")]),n("span",{staticClass:"app-list-item-percentage",attrs:{slot:"list-info-top-right"},slot:"list-info-top-right"},[t._v(t._s(t.formatPercentage(t.event.inferenced_percentage))+"%")]),n("span",{staticClass:"app-list-item-date",attrs:{slot:"list-info-bottom-left"},slot:"list-info-bottom-left"},[t._v(t._s(t.getDateTime(t.event.modified_date).toUpperCase()))]),n("span",{staticClass:"app-list-item-username",attrs:{slot:"list-info-bottom-right"},slot:"list-info-bottom-right"},[t._v("SURE")])],1)],1),n("app-dialog",{ref:"editmodal",attrs:{"max-width":"500",lazy:""},on:{opened:function(){return null}}},[n("template",{slot:"modaltitle"},[t._v("CHANGE CLASSIFICATION")]),n("template",{slot:"modalcontent"},[t.selectedForEdit?n("v-layout",{staticClass:"modal-content"},[n("v-flex",{attrs:{xs4:"","ma-3":"","mt-4":""}},[n("v-img",{staticClass:"edit-modal-image",attrs:{slot:"list-image",contain:"","aspect-ratio":1,src:t.selectedForEdit&&t.generateThumbUrl(t.selectedForEdit)},slot:"list-image"})],1),n("v-flex",{attrs:{xs8:"","pa-3":""}},[n("v-btn",{staticClass:"classification-btn",style:"employee"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("employee")}}},[t._v("employee")]),n("v-btn",{staticClass:"classification-btn",style:"train"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("train")}}},[t._v("train")]),n("v-btn",{staticClass:"classification-btn",style:"intruder"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("intruder")}}},[t._v("intruder")]),n("v-btn",{staticClass:"classification-btn",style:"animal"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("animal")}}},[t._v("animal")]),n("v-btn",{staticClass:"classification-btn",style:"false-alarm"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.openFalseAlarmModal()}}},[t._v("false alarm")])],1)],1):t._e()],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.saveEdits()}},slot:"detailsButton"},[t._v("Confirm")])],2),n("app-dialog",{ref:"falsealarm",attrs:{"max-width":"500",lazy:""},on:{opened:function(e){return t.focusTextarea()}}},[n("template",{slot:"modaltitle"},[t._v("CONFIRM FALSE ALARM?")]),n("template",{slot:"modalcontent"},[n("v-textarea",{ref:"falsealarmtextarea",staticClass:"textarea",attrs:{dark:"","background-color":"transparent",rows:"6","auto-grow":"",placeholder:"Please leave a reason for registering this event as a false alarm"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.newline(e):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.saveDescription()}},model:{value:t.classification_description,callback:function(e){t.classification_description=e},expression:"classification_description"}})],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.saveDescription()}},slot:"detailsButton"},[t._v("Confirm")])],2)],1)},kt=[],At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"app-list-item",class:t.selected?"selected":null,attrs:{flat:""},on:{click:function(e){return t.setSelected()}}},[n("v-layout",{attrs:{row:"","align-center":""}},[n("v-flex",{staticClass:"app-list-item-image-container",style:t.selected?"border-right: none;":null},[t._t("list-image")],2),n("v-flex",{staticClass:"app-list-item-info-container"},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"","pa-0":""}},[n("v-layout",{attrs:{"justify-space-between":"","align-center":"","px-2":""}},[t._t("list-info-top-left"),t._t("list-info-top-right")],2)],1),n("v-flex",{attrs:{xs12:"","pa-0":""}},[n("v-layout",{attrs:{"justify-space-between":"","align-center":"","px-2":""}},[t._t("list-info-bottom-left"),t._t("list-info-bottom-right")],2)],1)],1)],1)],1)],1)},St=[],Tt={props:{selected:{type:Boolean,required:!1,default:!1},event:{type:Object,required:!1,default:function(){}}},methods:{setSelected:function(){this.$emit("selected",this.event)}}},Ot=Tt,Rt=(n("9f27"),Object(C["a"])(Ot,At,St,!1,null,"6bd277b5",null)),$t=Rt.exports,It=n("6254"),Lt=n.n(It),Dt={components:{"app-list-item":$t,"app-dialog":ot},props:{event:{type:Object,required:!0},selected:{type:Number,required:!1,default:0}},data:function(){return{selectedForEdit:null,newClass:null,classification_description:""}},computed:{selectedClass:function(){return"color: var(--v-buttonBlack-base); background-color: #FFF;"}},methods:{getDateTime:function(t){return Lt()(new Date(t),{addSuffix:!0})},generateThumbUrl:function(t){return"".concat("http://localhost:3000","/").concat(t.thumb_filepath,"/").concat(t.thumb_filename)},formatPercentage:function(t){return(100*+t).toFixed(0)},focusTextarea:function(){var t=this;this.$nextTick(function(){t.$refs.falsealarmtextarea.focus()})},setNewClass:function(t){this.newClass=t},openEditModal:function(t){this.newClass=t.user_classification,this.selectedForEdit=t,this.$refs.editmodal.open()},onClosedEditModal:function(){this.newClass=null,this.selectedForEdit=null,this.classification_description=""},openFalseAlarmModal:function(){this.$refs.editmodal.close(),this.newClass="false-alarm",this.$refs.falsealarm.open()},saveDescription:function(){this.selectedForEdit.classification_description=this.classification_description.trim(),this.$refs.falsealarm.close(),this.saveEdits()},saveEdits:function(){this.selectedForEdit.user_classification=this.newClass,this.updateEvent(this.selectedForEdit)},updateEvent:function(t){var e=this;this.$events.updateEvent(t).then(function(){e.$refs.editmodal.close(),e.onClosedEditModal(),e.$notifySuccess("UPDATE SUCCESSFUL"),e.$emit("update")}).catch(function(t){console.error("ERROR",t),e.$notifyError("FAILED TO CLASSIFY EVENT"),e.$events.stopLoading()})}}},Ft=Dt,Nt=(n("eed5"),Object(C["a"])(Ft,wt,kt,!1,null,"c610bf10",null)),Pt=Nt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-wrapper"},[n("video",{ref:"videoPlayer",staticClass:"video-js vjs-4-3",class:{zoom:t.isZoomed}})])},Mt=[],Ut=n("f0e2"),Ht={name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}},fallbackImageUrl:{type:String,required:!1,default:null}},data:function(){return{player:null,duration:0,currentTime:0,interval:null,isZoomed:!1}},mounted:function(){var t=this;if(this.options){this.$nextTick(function(){t.player=Object(Ut["a"])(t.$refs.videoPlayer,t.options,function(){console.log("onPlayerReady",this)}),t.player.on("error",function(e){t.player.poster(t.fallbackImageUrl),console.log("ERROR LOADING VIDEO",t.player.error())})})}},beforeDestroy:function(){this.player&&this.player.dispose()},methods:{zoomIn:function(){this.player.zoomrotate({zoom:2,rotate:0})},zoomOut:function(){this.player.zoomrotate({zoom:0,rotate:0})}}},zt=Ht,Bt=(n("b25a"),n("53a9")),Gt=n.n(Bt),Kt=Object(C["a"])(zt,jt,Mt,!1,null,null,null);"function"===typeof Gt.a&&Gt()(Kt);var Vt=Kt.exports;function Yt(t){return Zt(t)||Wt(t)||qt()}function qt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Wt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Zt(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Jt(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function Xt(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){Jt(s,a,r,i,o,"next",t)}function o(t){Jt(s,a,r,i,o,"throw",t)}i(void 0)})}}var Qt={components:{"details--camera-image":Z,"events--class-button":Ct,"app-loading-spinner":et,"events--active-list-item":Pt,"video-player":Vt,"app-dialog":ot},data:function(){return{events:[],totalEventsCount:null,pageCount:0,queryLimit:20,socket:d()(L.a.socket_io_addr),listeners:null,disabled:!1,currentEvent:new S.a,classification_description:"",videoShowing:!1,videoOptions:{autoplay:!0,controls:!0,responsive:!0,aspectRatio:"4:3",fill:!0,muted:!0,language:"en",playbackRates:[.5,1,1.5,2],sources:[]},buttonTypes:[{type:"employee",val:"employee"},{type:"contractor",val:"contractor"},{type:"intruder",val:"intruder"},{type:"train moving",val:"train"},{type:"animal",val:"animal"},{type:"false alarm",val:"false-alarm"}]}},created:function(){var t=this;this.$events.startLoading(),this.getAlerts(),this.listeners=function(e){"1"===String.fromCharCode(e.keyCode)||97===e.keyCode?t.setClassification("employee"):"2"===String.fromCharCode(e.keyCode)||98===e.keyCode?t.setClassification("contractor"):"3"===String.fromCharCode(e.keyCode)||99===e.keyCode?t.setClassification("intruder"):"4"===String.fromCharCode(e.keyCode)||100===e.keyCode?t.setClassification("train"):"5"===String.fromCharCode(e.keyCode)||101===e.keyCode?t.setClassification("animal"):"6"===String.fromCharCode(e.keyCode)||102===e.keyCode?t.openFalseAlarmModal():32===e.keyCode&&t.$refs.cameraImage.zoom()},this.addListeners()},mounted:function(){var t=Xt(g.a.mark(function t(){var e=this;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.socket.on("TRIGGER_ALARM",function(t){e.getAlerts()});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){this.removeListeners()},watch:{alertsData:function(t,e){e.length>=this.queryLimit&&t.length<this.queryLimit&&this.getAlerts()}},computed:{eventsRemaining:function(){return this.events.length>0},alertsData:function(){return this.$alert.alerts},createFallbackImageUrl:function(){return console.log("CREATE FALLBACK","http://localhost:3000"),"".concat("http://localhost:3000").concat(this.currentEvent.image_filepath,"/").concat(this.currentEvent.image_filename)}},methods:{onScroll:function(t){var e=t.target,n=e.scrollTop,a=e.clientHeight,r=e.scrollHeight;n+a>=r&&(this.pageCount=this.pageCount+1,this.getAlerts())},getVideoOptions:function(){return this.videoOptions.sources=[{src:"".concat("http://localhost:3000").concat(this.currentEvent.video_clip_filepath,"/").concat(this.currentEvent.video_clip_filename),type:"video/mp4"}],this.videoOptions},showVideo:function(){this.videoShowing=!0},setCurrentEvent:function(t){this.currentEvent=t},addListeners:function(){window.addEventListener("keyup",this.listeners)},removeListeners:function(){window.removeEventListener("keyup",this.listeners)},openFalseAlarmModal:function(){this.removeListeners(),this.$refs.falsealarm.open()},setFalseAlarmClassification:function(t){this.$refs.falsealarm.close(),this.addListeners(),this.setClassification(t)},setClassification:function(t){this.disabled=!0,this.currentEvent.user_classification=t,this.currentEvent.classification_description=this.classification_description,this.currentEvent.classified_by=this.$auth.user.email,this.classification_description="",this.updateEvent(this.currentEvent)},focusTextarea:function(){var t=this;this.$nextTick(function(){t.$refs.falsealarmtextarea.focus()})},newline:function(){this.classification_description="".concat(this.classification_description,"\n")},updateEvent:function(){var t=Xt(g.a.mark(function t(e){var n,a=this;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$alert.updateAlert(e);case 3:if(n=t.sent,!n.status||500!==n.status){t.next=7;break}return this.$notifyError("ERROR GETTING TODAYS EVENTS. PLEASE TRY AGAIN LATER"),t.abrupt("return");case 7:this.$notifyClassification(e.user_classification.toUpperCase()),setTimeout(function(){a.events=a.events.filter(function(t){return t.id!==e.id}),a.currentEvent=a.events[0]},950),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.disabled=!1,console.error("ERROR CLASSIFYING EVENT",t.t0),this.$notifyError("ERROR CLASSIFYING EVENT. PLEASE TRY AGAIN LATER.");case 16:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}(),getAlerts:function(){var t=Xt(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$alert.getAlerts({page:this.pageCount,limit:this.queryLimit});case 3:if(e=t.sent,console.log("CLIENT RESP",e),!e.status||500!==e.status){t.next=8;break}return this.$notifyError("ERROR GETTING EVENTS. PLEASE TRY AGAIN LATER"),t.abrupt("return");case 8:if(!(this.pageCount>0&&0===e.length)){t.next=10;break}return t.abrupt("return");case 10:this.events.length<=e.length?(this.events=e,this.currentEvent=this.events[0]):this.events=[].concat(Yt(this.events),Yt(e)),this.setEventsCount(),this.$events.stopLoading(),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),console.error("ERROR GETTING EVENTS",t.t0),this.$notifyError("ERROR GETTING EVENTS. PLEASE TRY AGAIN LATER.");case 19:case"end":return t.stop()}},t,this,[[0,15]])}));function e(){return t.apply(this,arguments)}return e}(),setEventsCount:function(){var t=Xt(g.a.mark(function t(){return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$alert.getAlertCount();case 3:this.totalEventsCount=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("ERROR GETTING COUNT",t.t0),this.$notifyError("ERROR GETTING EVENTS COUNT. PLEASE TRY AGAIN LATER.");case 10:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}()}},te=Qt,ee=(n("7fe14"),n("e4f6")),ne=n.n(ee),ae=Object(C["a"])(te,ht,yt,!1,null,"294948ba",null);"function"===typeof ne.a&&ne()(ae);var re=ae.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"container",attrs:{"fill-height":"",fluid:""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{staticClass:"box",attrs:{xs4:""}},[n("h1",{staticClass:"numeral text-xs-center"},[t._v("404")]),n("h3",{staticClass:"text text-xs-center"},[t._v("LOOKS LIKE SOMETHING WENT WRONG")])])],1)],1)},ie=[],oe=(n("2301"),{}),ce=Object(C["a"])(oe,se,ie,!1,null,"ca9c25b8",null),le=ce.exports,ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"container",expression:"'container'"}],staticClass:"overview-container",attrs:{"fill-height":"","px-0":"","pt-1":""}},[n("v-layout",{attrs:{column:""}},[n("v-layout",{attrs:{"align-center":"","justify-space-between":""}},[n("v-card",{directives:[{name:"flash",rawName:"v-flash",value:!t.$alert.muteDuration&&t.$alert.showHeader,expression:"!$alert.muteDuration && $alert.showHeader"}],staticClass:"card-container",class:t.$alert.showHeader&&"east"===t.$alert.alertData.camera&&!t.$alert.muteDuration?"alert-active":null,attrs:{flat:""}},[n("overview-live-feed",{attrs:{stream:t.streams[0]}}),n("v-card-title",[n("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[n("span",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"vid-title",expression:"'vid-title'"}],staticClass:"cam-name"},[t._v("RAIL EAST")]),n("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$alert.showHeader&&"east"===t.$alert.alertData.camera&&!t.$alert.muteDuration,expression:"$alert.showHeader && $alert.alertData.camera === 'east' && !$alert.muteDuration"}],staticClass:"my-0 cam-link",attrs:{to:"/events",flat:""}},[t._v("VIEW")])],1)],1)],1),n("v-card",{staticClass:"card-container",class:t.$alert.showHeader&&"west"===t.$alert.alertData.camera&&!t.$alert.muteDuration?"alert-active":null,attrs:{flat:""}},[n("overview-live-feed",{attrs:{stream:t.streams[1]}}),n("v-card-title",[n("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[n("span",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"vid-title",expression:"'vid-title'"}],staticClass:"cam-name"},[t._v("RAIL WEST")]),n("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$alert.showHeader&&"west"===t.$alert.alertData.camera&&!t.$alert.muteDuration,expression:"$alert.showHeader && $alert.alertData.camera === 'west' && !$alert.muteDuration"}],staticClass:"my-0 cam-link",attrs:{to:"/events",flat:""}},[t._v("VIEW")])],1)],1)],1)],1),n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("overview-mute")],1)],1)],1)},fe=[],de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("video-player",{attrs:{options:t.getVideoOptions()}})},pe=[],ve={components:{"video-player":Vt},props:{stream:{type:Object,required:!0}},data:function(){return{cameras:{},cameraData:{},canvas:null,videoOptions:{autoplay:!0,controls:!0,liveui:!0,responsive:!0,aspectRatio:"4:3",loop:!1,muted:!0,language:"en",sources:[]}}},methods:{getVideoOptions:function(){return this.videoOptions.sources=[this.stream.sourceData],this.videoOptions}}},me=ve,he=(n("83629"),n("df95")),ye=n.n(he),ge=Object(C["a"])(me,de,pe,!1,null,"26fd0a39",null);"function"===typeof ye.a&&ye()(ge);var be=ge.exports,Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[t.$alert.muteDuration?[n("p",{staticClass:"clock label mb-0"},[t._v("ALARMS MUTED FOR")]),n("p",{staticClass:"clock timer mb-0"},[t._v(t._s(t.formatDuration))]),n("v-btn",{staticClass:"clock btn",attrs:{flat:"",dark:"",large:""},on:{click:function(e){return t.$alert.clearMuteDuration()}}},[t._v("UNMUTE")])]:n("v-btn",{attrs:{flat:"",dark:"",large:""},on:{click:function(e){return t.$refs.mute.open()}}},[t._v("MUTE ALARM")]),n("app-dialog",{ref:"mute",attrs:{lazy:""}},[n("template",{slot:"modalcontent"},[n("v-layout",{attrs:{column:"","align-center":"","justify-center":"","fill-height":""}},[n("h1",{staticClass:"header-text"},[t._v("SELECT HOW LONG YOU WOULD LIKE TO MUTE ALARMS")]),n("v-container",{attrs:{fluid:"","grid-list-xs":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":"","my-2":""}},t._l(t.muteOptions,function(e){return n("v-btn",{key:e.val+"mute",staticClass:"mute-card",attrs:{dark:"","mx-2":"","my-2":""},on:{click:function(n){return t.setMuteDuration(e.val)}}},[n("v-layout",{attrs:{column:"","align-center":"","justify-center":"","fill-height":""}},[n("p",{staticClass:"mb-0 time"},[t._v(t._s(t.toHours(e.val)))]),n("p",{staticClass:"mb-0 text"},[t._v(t._s(e.text))])])],1)}),1)],1)],1)],1)],2)],2)},xe=[],_e={components:{"app-dialog":ot},data:function(){return{muteOptions:[{val:15,text:"MINUTES"},{val:30,text:"MINUTES"},{val:60,text:"HOUR"},{val:120,text:"HOURS"},{val:180,text:"HOURS"}],durationInterval:null,duration:null}},methods:{toHours:function(t){return t>=60?Math.floor(t/60):t},setMuteDuration:function(t){this.$alert.setMuteDuration(t),this.startCountdown(),this.$refs.mute.close()},startCountdown:function(){var t=this;this.durationInterval=setInterval(function(){t.$alert.setMuteDuration(t.$alert.muteDuration-1),t.$alert.muteDuration<=0&&(clearInterval(t.durationInterval),t.$alert.clearMuteDuration())},6e4)}},computed:{formatDuration:function(){var t=this.$alert.muteDuration>=60?this.toHours(this.$alert.muteDuration):0,e=this.$alert.muteDuration%60;return"".concat(t.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"))}}},Ce=_e,we=(n("4d48"),Object(C["a"])(Ce,Ee,xe,!1,null,"8239b1a2",null)),ke=we.exports,Ae={components:{"overview-live-feed":be,"overview-mute":ke},data:function(){return{working:!0,eastCamStream:null,westCamStream:null,streams:[{camNumber:1,camName:"Rail-EAST",sourceData:{src:L.a.stream_data_one,type:"application/x-mpegURL"},staticImage:"/assets/images/ref_raileast.jpg"},{camNumber:2,camName:"Rail-WEST",sourceData:{src:L.a.stream_data_two,type:"application/x-mpegURL"},staticImage:"/assets/images/ref_raileast.jpg"}]}},mounted:function(){},beforeRouteLeave:function(t,e,n){this.stopPlayers().then(function(){n()})},beforeDestroy:function(){clearInterval(this.timer)},methods:{stopPlayers:function(){var t=this;return new Promise(function(e){null!==t.eastCamStream&&t.eastCamStream.destroy(),null!==t.westCamStream&&t.westCamStream.destroy(),e()})}}},Se=Ae,Te=(n("0767"),n("1aa8")),Oe=n.n(Te),Re=Object(C["a"])(Se,ue,fe,!1,null,"2a415b86",null);"function"===typeof Oe.a&&Oe()(Re);var $e=Re.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"history-container",attrs:{"fill-height":"",fluid:"","pa-0":"","ml-0":"","mr-0":"","grid-list-lg":""}},[t.$events.loading?[n("app-loading-spinner")]:[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{shrink:""}},[n("v-layout",{staticClass:"app-card-container",attrs:{"justify-center":"","align-center":"","pa-2":""}},[t._l(t.counts,function(e,a){return[n("v-flex",{key:a+"card",staticClass:"app-card",class:t.selectedType===a?"app-card-selected":"",attrs:{xs4:"","d-flex":""},on:{click:function(e){return t.selectEventType(a)}}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{attrs:{"py-0":""}},[n("p",{staticClass:"name mb-0"},[t._v(t._s(a.toUpperCase())+"S")]),n("p",{staticClass:"count mb-0"},[t._v(t._s(e||0))])]),n("v-flex",{staticStyle:{"margin-bottom":"-10px"},attrs:{"pa-0":"","pr-1":"","text-xs-right":""}},[n("p",{staticClass:"percentage mb-0"},[t._v(t._s(Math.round(t.percentage(e))||0)+"%")])])],1)],1),"false-alarm"!=a?n("v-divider",{key:a+"divider",staticClass:"app-card-divider",attrs:{vertical:""}}):t._e()]})],2)],1),n("v-flex",{attrs:{"px-4":"","pb-0":"","mt-2":"",shrink:""}},[n("v-layout",{class:t.$vuetify.breakpoint.lgAndUp?"justify-space-between":"justify-center",staticStyle:{"padding-left":"16px","padding-right":"21px"},attrs:{wrap:"","my-2":"","align-center":""}},[n("v-flex",{attrs:{xs5:""}},[n("v-layout",{attrs:{"justify-start":""}},[n("h3",{staticClass:"sort-bar-text"},[t._v("\n                "+t._s(t.currentFilter.replace(/_/," ").toUpperCase())+t._s("all"!==t.currentFilter?"S":null)+"\n                "+t._s(t.selectedType.toUpperCase())+"S\n                ("+t._s(t.eventTypeCount||0)+")\n              ")])])],1),n("v-flex",{attrs:{xs7:""}},[n("v-layout",{attrs:{"justify-end":""}},[n("div",{staticClass:"select-container"},[n("span",{staticClass:"text"},[t._v("SHOW ONLY")]),n("select",{staticClass:"select",domProps:{value:t.currentFilter},on:{change:function(e){return t.filterBy(e)}}},t._l(t.filterOptions,function(e){return n("option",{key:e.text,domProps:{value:e.value}},[t._v(t._s(e.text))])}),0)])])],1)],1)],1),n("v-flex",{ref:"scrollDiv",staticClass:"list-container",attrs:{"pt-0":""},on:{scroll:t.onScroll}},[n("archive--default-list",{attrs:{data:t.eventTypes[t.selectedType]},on:{update:function(e){return t.updateListItems(t.currentFilter)}}})],1)],1)]],2)},Le=[],De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-xs":"",fluid:""}},[0===t.data.events.length?n("v-layout",{attrs:{"justify-center":""}},[n("span",{staticStyle:{color:"white","font-family":"DIN Condensed","font-size":"30px"}},[t._v("THERE ARE NO EVENTS FOR "+t._s(t.data.type.toUpperCase())+"S")])]):n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.data.events,function(e){return n("v-flex",{key:e.id+"default",attrs:{xs12:"",sm6:"",md4:"",lg3:"",xl2:"","ma-0":"","pa-0":""}},[n("archive--list-item",{attrs:{event:e},on:{update:function(e){return t.$emit("update")}}})],1)}),1)],1)},Fe=[],Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("v-card",{staticClass:"app-list-item",class:t.selected?"selected":null,attrs:{flat:""},on:{click:function(e){return t.setSelected()}}},[n("v-layout",{attrs:{row:"","ma-0":"","pa-0":""}},[n("div",{staticClass:"app-list-item-image-container"},[n("v-img",{staticClass:"app-list-item-image",attrs:{contain:"","aspect-ratio":1,src:t.event&&t.generateThumbUrl(t.event)}})],1),n("v-layout",{staticClass:"app-list-item-info-container",attrs:{"ma-0":"","pa-0":"",column:"","justify-space-between":""}},[n("span",{staticClass:"app-list-item-date"},[t._v(t._s(t.getDateTime(t.event.modified_date).toUpperCase()))]),n("span",{staticClass:"app-list-item-camera"},[t._v("RAIL "+t._s(t.event.camera.toUpperCase()))]),n("v-btn",{staticClass:"app-list-item-button",attrs:{flat:"",small:""},on:{click:function(e){return t.openEditModal(t.event)}}},[t._v("EDIT")])],1)],1)],1),n("app-dialog",{ref:"editmodal",attrs:{"max-width":"500",lazy:""},on:{opened:function(){return null}}},[n("template",{slot:"modaltitle"},[t._v("CHANGE CLASSIFICATION")]),n("template",{slot:"modalcontent"},[t.selectedForEdit?n("v-layout",{staticClass:"modal-content"},[n("v-flex",{attrs:{xs4:"","ma-3":"","mt-4":""}},[n("v-img",{staticClass:"edit-modal-image",attrs:{slot:"list-image",contain:"","aspect-ratio":1,src:t.selectedForEdit&&t.generateThumbUrl(t.selectedForEdit)},slot:"list-image"})],1),n("v-flex",{attrs:{xs8:"","pa-3":""}},[n("v-btn",{staticClass:"classification-btn",style:"employee"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("employee")}}},[t._v("employee")]),n("v-btn",{staticClass:"classification-btn",style:"contractor"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("contractor")}}},[t._v("contractor")]),n("v-btn",{staticClass:"classification-btn",style:"intruder"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("intruder")}}},[t._v("intruder")]),n("v-btn",{staticClass:"classification-btn",style:"animal"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("animal")}}},[t._v("animal")]),n("v-btn",{staticClass:"classification-btn",style:"train"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.setNewClass("train")}}},[t._v("train")]),n("v-btn",{staticClass:"classification-btn",style:"false-alarm"===t.newClass?t.selectedClass:"",attrs:{block:"",flat:""},on:{click:function(){return t.openFalseAlarmModal()}}},[t._v("false alarm")])],1)],1):t._e()],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.saveEdits()}},slot:"detailsButton"},[t._v("Confirm")])],2),n("app-dialog",{ref:"falsealarm",attrs:{"max-width":"500",lazy:""},on:{opened:function(e){return t.focusTextarea()}}},[n("template",{slot:"modaltitle"},[t._v("CONFIRM FALSE ALARM?")]),n("template",{slot:"modalcontent"},[n("v-textarea",{ref:"falsealarmtextarea",staticClass:"textarea",attrs:{dark:"","background-color":"transparent",rows:"6","auto-grow":"",placeholder:"Please leave a reason for registering this event as a false alarm"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.newline(e):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.saveDescription()}},model:{value:t.classification_description,callback:function(e){t.classification_description=e},expression:"classification_description"}})],1),n("v-btn",{staticStyle:{"background-color":"#FFF",color:"black"},attrs:{slot:"detailsButton",dark:"",disabled:!1},on:{click:function(e){return t.saveDescription()}},slot:"detailsButton"},[t._v("Confirm")])],2)],1)},Pe=[],je=n("70f2"),Me=n.n(je),Ue={components:{"app-dialog":ot},props:{event:{type:Object,required:!1,default:function(){}},selected:{type:Number,required:!1,default:0}},data:function(){return{selectedForEdit:null,newClass:null,classification_description:""}},computed:{selectedClass:function(){return"color: var(--v-buttonBlack-base); background-color: #FFF;"}},methods:{getDateTime:function(t){return Me()(t,"MMM DD HH:MM:SS")},generateThumbUrl:function(t){return"".concat("http://localhost:3000","/").concat(t.thumb_filepath,"/").concat(t.thumb_filename)},formatPercentage:function(t){return(100*+t).toFixed(0)},focusTextarea:function(){var t=this;this.$nextTick(function(){t.$refs.falsealarmtextarea.focus()})},setSelected:function(){this.$emit("selected",this.event)},setNewClass:function(t){this.newClass=t},openEditModal:function(t){this.newClass=t.user_classification,this.selectedForEdit=t,this.$refs.editmodal.open()},onClosedEditModal:function(){this.newClass=null,this.selectedForEdit=null,this.classification_description=""},openFalseAlarmModal:function(){this.$refs.editmodal.close(),this.newClass="false-alarm",this.$refs.falsealarm.open()},saveDescription:function(){this.selectedForEdit.classification_description=this.classification_description.trim(),this.$refs.falsealarm.close(),this.saveEdits()},saveEdits:function(){this.selectedForEdit.user_classification=this.newClass,this.updateEvent(this.selectedForEdit)},updateEvent:function(t){var e=this;this.$events.updateEvent(t).then(function(){e.$refs.editmodal.close(),e.onClosedEditModal(),e.$notifySuccess("UPDATE SUCCESSFUL"),e.$emit("update")}).catch(function(t){console.error("ERROR",t),e.$notifyError("FAILED TO CLASSIFY EVENT"),e.$events.stopLoading()})}}},He=Ue,ze=(n("303a"),Object(C["a"])(He,Ne,Pe,!1,null,"e1b6bbcc",null)),Be=ze.exports,Ge={components:{"archive--list-item":Be,"app-dialog":ot},props:{data:{type:Object,required:!0}}},Ke=Ge,Ve=n("9f96"),Ye=n.n(Ve),qe=Object(C["a"])(Ke,De,Fe,!1,null,null,null);"function"===typeof Ye.a&&Ye()(qe);var We=qe.exports;function Ze(t){Object.assign(this,Ze.template,t)}Object.defineProperty(Ze,"template",{get:function(){return{employee:{name:"Employee",type:"employee",page:0,events:[]},intruder:{name:"Intruder",type:"intruder",page:0,events:[]},contractor:{name:"Contraactor",type:"contractor",page:0,events:[]},train:{name:"Train",type:"train",page:0,events:[]},animal:{name:"Animal",type:"animal",page:0,events:[]},"false-alarm":{name:"False Alarm",type:"false-alarm",page:0,events:[]}}}});var Je=Ze;function Xe(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function Qe(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){Xe(s,a,r,i,o,"next",t)}function o(t){Xe(s,a,r,i,o,"throw",t)}i(void 0)})}}var tn={components:{"app-loading-spinner":et,"archive--default-list":We},data:function(){return{totalEvents:[],eventTypes:new Je,eventTypeCount:null,selectedType:"animal",currentFilter:"all",filterOptions:[{text:"All",value:"all"},{text:"Today",value:"today"},{text:"This Week",value:"current_week"},{text:"Last Week",value:"last_week"}],counts:{}}},created:function(){this.$events.startLoading()},mounted:function(){this.getEventsCountByType(),this.fetchHistory()},methods:{onScroll:function(t){var e=t.target,n=e.scrollTop,a=e.clientHeight,r=e.scrollHeight;n+a>=r&&this.fetchHistory()},scrollToBottom:function(){var t=this.$refs.scrollDiv;t.scrollTop=t.scrollHeight},updateListItems:function(t){this.fetchHistory(t)},filterBy:function(t){this.currentFilter=t.target.value,this.resetFilteredEvents(t.target.value)},resetFilteredEvents:function(t){this.$events.startLoading(),this.eventTypes=new Je,this.fetchHistory(t)},fetchHistory:function(){var t=Qe(g.a.mark(function t(){var e,n,a,r,s,i=this,o=arguments;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:null,t.prev=1,n=this.selectedType,a=20,!(this.eventTypeCount&&0!==this.eventTypes[n].events.length&&0!=this.eventTypeCount&&this.eventTypes[n].events.length>=this.eventTypeCount)){t.next=7;break}return this.$events.stopLoading(),t.abrupt("return");case 7:return e&&(this.eventTypes[n].page=0),t.next=10,this.$events.getArchivedEventsByType({type:n,limit:a,page:this.eventTypes[n].page,filteredBy:e});case 10:if(r=t.sent,console.log("RESP",r),!r.status||500!==r.status){t.next=16;break}return this.$notifyError("ERROR GETTING ARCHIVED EVENTS. PLEASE TRY AGAIN LATER"),this.$events.stopLoading(),t.abrupt("return");case 16:s=r.events,this.eventTypeCount=r.count,s.forEach(function(t){var e=t.user_classification;i.eventTypes[e].events.push(t)}),this.eventTypes[n].page>0&&this.scrollToBottom(),s.length>=a&&this.eventTypes[n].page++,this.$events.stopLoading(),t.next=29;break;case 24:t.prev=24,t.t0=t["catch"](1),console.error("ERROR GETTING ALL EVENTS",t.t0),this.$events.stopLoading(),this.$notifyError("ERROR FINDING EVENT HISTORY");case 29:case"end":return t.stop()}},t,this,[[1,24]])}));function e(){return t.apply(this,arguments)}return e}(),getEventsCountByType:function(){var t=Qe(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$events.getEventsCount();case 2:e=t.sent,this.counts=e[0];case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),percentage:function(t){return 100*t/this.getTotalEvents},selectEventType:function(t){this.selectedType=t,this.fetchHistory()}},computed:{getTotalEvents:function(){var t=0;for(var e in this.counts)t+=+this.counts[e];return t},getComponent:function(){return"false-alarm"===this.selectedType?FalseAlarmList:We}}},en=tn,nn=(n("a7c3"),n("43dd")),an=n.n(nn),rn=Object(C["a"])(en,Ie,Le,!1,null,"2a652e35",null);"function"===typeof an.a&&an()(rn);var sn=rn.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":"","fill-height":""}},[n("v-flex",{staticClass:"container-form",attrs:{xs6:"","px-5":""}},[n("v-layout",{class:t.$vuetify.breakpoint.smAndUp?"justify-start":"justify-center",attrs:{row:"",wrap:"","align-center":"","fill-height":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{"justify-center":""}},[n("div",{staticClass:"red-border"},[n("span",{staticClass:"welcome"},[t._v("WELCOME")])])])],1),n("v-flex",{attrs:{sm10:"","offset-xs1":""}},[n("v-card",{attrs:{flat:"",color:"secondaryDark"}},[n("v-card-text",{staticClass:"py-0"},[n("v-form",{staticClass:"app-form"},[n("label",{staticClass:"app-form-label",attrs:{for:"employeeEmail"}},[t._v("COMPANY EMAIL ADDRESS")]),n("input",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"employee-email",expression:"'employee-email'"},{name:"model",rawName:"v-model",value:t.employeeEmail,expression:"employeeEmail"}],attrs:{name:"employeeEmail",placeholder:"admin@email.com",type:"text"},domProps:{value:t.employeeEmail},on:{input:function(e){e.target.composing||(t.employeeEmail=e.target.value)}}}),n("label",{staticClass:"app-form-label",attrs:{for:"password"}},[t._v("COMPANY EMAIL ADDRESS")]),n("input",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"password",expression:"'password'"},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{name:"password",placeholder:"password",type:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()},input:function(e){e.target.composing||(t.password=e.target.value)}}})])],1),n("v-card-actions",{staticClass:"px-3 text-xs-center"},[n("v-layout",{attrs:{wrap:"","align-center":"","justify-space-between":""}},[n("v-checkbox",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"remember-checkbox",expression:"'remember-checkbox'"}],attrs:{dark:"",color:"accent"},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticStyle:{color:"#FFF","font-family":"'DIN Condensed","letter-spacing":"2px"}},[t._v("REMEMBER ME")])]},proxy:!0}]),model:{value:t.remember,callback:function(e){t.remember=e},expression:"remember"}}),n("v-btn",{directives:[{name:"test-ref",rawName:"v-test-ref",value:"login-btn",expression:"'login-btn'"}],attrs:{loading:t.$auth.status.loggingIn,color:"accent"},on:{click:function(e){return t.login()}}},[t._v("Sign In")])],1)],1)],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{"justify-center":""}},[n("router-link",{staticClass:"password-reset",attrs:{to:"",flat:""}},[t._v("FORGOT YOUR PASSWORD?")])],1)],1)],1)],1),n("v-flex",{staticClass:"container-image",attrs:{xs6:"","ml-0":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":"","fill-height":""}},[n("v-img",{attrs:{"max-width":"55%",src:"/assets/images/wiley_logo_xl.png"}})],1)],1)],1)},cn=[];function ln(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function un(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){ln(s,a,r,i,o,"next",t)}function o(t){ln(s,a,r,i,o,"throw",t)}i(void 0)})}}var fn={data:function(){return{employeeEmail:"admin@email.com",password:"password",remember:!1}},methods:{login:function(){var t=un(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$auth.login(this.employeeEmail,this.password);case 3:if(e=t.sent,500!==e.status){t.next=7;break}return this.$notifyError("INVALID EMAIL AND/OR PASSWORD"),t.abrupt("return");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$notifyError("ERROR GETTING TODAYS EVENTS. PLEASE TRY AGAIN LATER");case 12:return t.prev=12,this.$router.replace("/overview"),t.finish(12);case 15:case"end":return t.stop()}},t,this,[[0,9,12,15]])}));function e(){return t.apply(this,arguments)}return e}()}},dn=fn,pn=(n("bff1"),n("9796")),vn=n.n(pn),mn=Object(C["a"])(dn,on,cn,!1,null,null,null);"function"===typeof vn.a&&vn()(mn);var hn=mn.exports,yn=n("2f62"),gn=n("bfa9"),bn=n("bc3a"),En=n.n(bn);function xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){_n(t,e,n[e])})}return t}function _n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cn(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function wn(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){Cn(s,a,r,i,o,"next",t)}function o(t){Cn(s,a,r,i,o,"throw",t)}i(void 0)})}}var kn=En.a.create();kn.token=window.localStorage.getItem("token")||null,kn.new=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.defaults.baseURL=e,this.token&&(this.tokenInterceptor=this.interceptors.request.use(function(e){return e.headers["Authorization"]="Bearer "+t.token,e}))},kn.getAlerts=function(){var t=wn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/get_alerts_postgres",xn({},e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),kn.updateAlert=function(){var t=wn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/update_alert_postgres",{event:e});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),kn.getAlertCount=wn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/get_alerts_count");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));var An=kn;An.new("/api");var Sn={namespaced:!0,state:{alerts:[],alertData:null,active:!1,showHeader:!1,muteDuration:null},getters:{alert:function(t){return t}},mutations:{setAlerts:function(t,e){t.alerts=e},removeAlert:function(t,e){t.alerts=t.alerts.filter(function(t){return t.id!==e.id}),console.log("ATATE",t.alerts)},createAlert:function(t,e){t.alertData=new S.a(e.alertData),t.active=!0},clearAlert:function(t){t.alertData=null,t.active=!1},showAlertHeader:function(t){t.showHeader=!0},hideAlertHeader:function(t){t.showHeader=!1},setMuteDuration:function(t,e){t.muteDuration=e.duration},clearMuteDuration:function(t){t.muteDuration=null}},actions:{createAlert:function(t,e){t.commit("createAlert",e),t.commit("showAlertHeader")},clearAlert:function(t){var e=t.commit;e("clearAlert"),e("hideAlertHeader")},showAlertHeader:function(t){var e=t.commit;e("showAlertHeader")},hideAlertHeader:function(t){var e=t.commit;e("clearAlert"),e("hideAlertHeader")},setMuteDuration:function(t,e){var n=t.commit;n("setMuteDuration",e)},clearMuteDuration:function(t){var e=t.commit;e("clearMuteDuration")},getAlerts:function(t,e){var n=t.commit;return An.getAlerts(e).then(function(t){return n("setAlerts",t),t})},updateAlert:function(t,e){return An.updateAlert(e.event).then(function(n){return t.commit("removeAlert",e.event),n})},getAlertCount:function(){return An.getAlertCount().then(function(t){return t[0].count})}}},Tn=En.a.create();Tn.token=window.localStorage.getItem("token")||null,Tn.new=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.defaults.baseURL=e,this.token&&(this.tokenInterceptor=this.interceptors.request.use(function(e){return e.headers["Authorization"]="Bearer "+t.token,e}))},Tn.login=function(t,e){var n=this;return this.post("/login",{employeeEmail:t,password:e}).then(function(t){var e=t.data;return e.data.token&&(window.localStorage.setItem("user",JSON.stringify(e.data)),window.localStorage.setItem("token",e.data.token),n.tokenInterceptor=n.interceptors.request.use(function(t){return t.headers["Authorization"]="Bearer "+e.data.token,t})),t.data}).catch(function(t){return t})},Tn.logout=function(){this.token=null,this.interceptors.request.eject(this.tokenInterceptor),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")};var On=Tn;On.new("/api");var Rn=JSON.parse(localStorage.getItem("user")),$n=Rn?{status:{loggedIn:!0},user:Rn}:{status:{},user:null},In={namespaced:!0,state:$n,getters:{user:function(t){return t}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginFailure:function(t){t.status={},t.user=null},logout:function(t){t.status={},t.user=null}},actions:{login:function(t,e){var n=t.commit,a=e.employeeEmail,r=e.password;return n("loginRequest",{employeeEmail:a,password:r}),o.a.auth().signInWithEmailAndPassword(a,r).then(function(t){var e={email:t.user.email,verified:t.user.emailVerified,id:t.user.uid};return window.localStorage.setItem("token",e.id),n("loginSuccess",e),e}).catch(function(t){return n("loginFailure",t),{e:t,status:500}})},logout:function(t){var e=t.commit;o.a.auth().signOut(),window.localStorage.clear(),e("logout")}}};function Ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){Dn(t,e,n[e])})}return t}function Dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fn(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function Nn(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){Fn(s,a,r,i,o,"next",t)}function o(t){Fn(s,a,r,i,o,"throw",t)}i(void 0)})}}var Pn=En.a.create();Pn.token=window.localStorage.getItem("token")||null,Pn.new=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.defaults.baseURL=e,this.token&&(this.tokenInterceptor=this.interceptors.request.use(function(e){return e.headers["Authorization"]="Bearer "+t.token,e}))},Pn.createEvent=function(){var t=Nn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/create_event",{event:e});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),Pn.updateEvent=function(){var t=Nn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/update_event_postgres",{event:e});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),Pn.getAllEvents=Nn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/get_all_events_postgres");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])})),Pn.getFiftyEvents=Nn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/get_fifty_unclassified_events_postgres");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])})),Pn.getArchivedEvents=function(){var t=Nn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/get_archived_events_postgres",Ln({},e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),Pn.getArchivedEventsByType=function(){var t=Nn(g.a.mark(function t(e){var n;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post("/get_archived_events_by_type_postgres",Ln({},e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),Pn.getEventsCount=Nn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/get_events_count");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])})),Pn.setYesterdaysEvents=Nn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/set_yesterdays_events_postgres");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:500,msg:t.t0});case 10:case"end":return t.stop()}},t,this,[[0,7]])})),Pn.deleteEvents=Nn(g.a.mark(function t(){var e;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get("/delete_events");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));var jn=Pn;jn.new("/api");var Mn={namespaced:!0,state:{sessionEvents:[],events:[],loading:!0},getters:{history:function(t){return t}},mutations:{createEvent:function(t,e){t.history.push(e.event)},updateEvent:function(t,e){t.events=t.events.map(function(t){return t.id===e.event.id?e.event:t})},updateSessionEvent:function(t,e){t.sessionEvents=t.sessionEvents.map(function(t){return t.id===e.event.id?e.event:t})},setEvents:function(t,e){t.events=e},setSessionEvents:function(t,e){t.sessionEvents=e},deleteEvents:function(t){t.events=[]},startLoading:function(t){t.loading=!0},stopLoading:function(t){t.loading=!1}},actions:{createEvent:function(t,e){var n=t.commit;return n("createEvent",e),jn.createEvent(e.event).then(function(t){return t})},updateEvent:function(t,e){var n=t.commit;return jn.updateEvent(e.event).then(function(t){return n("updateSessionEvent",e),t})},getAllEvents:function(t){var e=t.commit;return jn.getAllEvents().then(function(t){return e("setEvents",t),t})},getFiftyEvents:function(t){var e=t.commit;return jn.getFiftyEvents().then(function(t){return e("setSessionEvents",t),t})},getAllClassifiedEvents:function(){return jn.getAllClassifiedEvents().then(function(t){return t})},getArchivedEvents:function(t,e){return jn.getArchivedEvents(e).then(function(t){return t})},getArchivedEventsByType:function(t,e){return jn.getArchivedEventsByType(e).then(function(t){return t})},getEventsCount:function(){return jn.getEventsCount().then(function(t){return t})},setEvents:function(t,e){var n=t.commit;n("setEvents",e.events)},deleteEvents:function(t){var e=t.commit;return e("deleteEvents"),jn.deleteEvents().then(function(t){return t})},setYesterdaysEvents:function(t,e){var n=t.commit;return jn.setYesterdaysEvents().then(function(t){return n("setSessionEvents",t),t})},startLoading:function(t){var e=t.commit;e("startLoading")},stopLoading:function(t){var e=t.commit;e("stopLoading")}}};a["default"].use(yn["a"]);var Un=new yn["a"].Store({plugins:[new gn["a"]({storage:window.localStorage,modules:["authentication","alert","eventHistory"]}).plugin],modules:{authentication:In,alert:Sn,eventHistory:Mn}});function Hn(t,e,n,a,r,s,i){try{var o=t[s](i),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function zn(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function i(t){Hn(s,a,r,i,o,"next",t)}function o(t){Hn(s,a,r,i,o,"throw",t)}i(void 0)})}}a["default"].use(U["a"]);var Bn=new U["a"]({mode:"history",base:"/",routes:[{path:"/sign_in",name:"signIn",component:hn},{path:"/overview",name:"overview",component:$e,meta:{requiresAuth:!0},alias:"/"},{path:"/training",name:"training",component:mt,meta:{requiresAuth:!0}},{path:"/events",name:"events",component:re,meta:{requiresAuth:!0}},{path:"/archive",name:"archive",component:sn,meta:{requiresAuth:!0}},{path:"/not_found",name:"not-found",component:le},{path:"*",redirect:"/not_found"}]});Bn.beforeEach(function(){var t=zn(g.a.mark(function t(e,n,a){var r;return g.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.redirectedFrom||!e.redirectedFrom.includes("clear")){t.next=13;break}return t.prev=1,t.next=4,Un.dispatch("eventHistory/deleteEvents",{});case 4:r=t.sent,500===r.status&&console.log("Error in router"),a("/training"),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](1),new Error(t.t0);case 12:return t.abrupt("return");case 13:e.matched.some(function(t){return t.meta.requiresAuth})?o.a.auth().onAuthStateChanged(function(t){t?a():a("/sign_in")}):a();case 14:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n,a){return t.apply(this,arguments)}}());var Gn={install:function(t){t.mixin({computed:{$auth:function(){var t=Un.getters["authentication/user"];return t.login=function(t,e){return Un.dispatch("authentication/login",{employeeEmail:t,password:e})},t.logout=function(){return Un.dispatch("authentication/logout")},t}}})}},Kn=n("ee98"),Vn=n.n(Kn),Yn=n("589d"),qn=n.n(Yn),Wn={install:function(t){var e="app-notifications",n="classification-notifications";t.use(Vn.a,{velocity:qn.a}),t.mixin({methods:{$notifyError:function(t){this.$notify({group:e,text:t,type:"error"})},$notifyInfo:function(t){this.$notify({group:e,text:t,type:"info"})},$notifySuccess:function(t){this.$notify({group:e,text:t,type:"success"})},$notifyWarn:function(t){this.$notify({group:e,text:t,type:"warning"})},$notifyClassification:function(t){this.$notify({group:n,text:t,type:"classification"})}}})}},Zn={install:function(t){t.mixin({computed:{$alert:function(){var t=Un.getters["alert/alert"];return t.createAlert=function(t){return Un.dispatch("alert/createAlert",{alertData:t})},t.clearAlert=function(){return Un.dispatch("alert/clearAlert")},t.updateAlert=function(t){return Un.dispatch("alert/updateAlert",{event:t})},t.showAlertHeader=function(){return Un.dispatch("alert/showAlertHeader")},t.hideAlertHeader=function(){return Un.dispatch("alert/hideAlertHeader")},t.setMuteDuration=function(t){return Un.dispatch("alert/clearAlert"),Un.dispatch("alert/setMuteDuration",{duration:t})},t.clearMuteDuration=function(){return Un.dispatch("alert/clearMuteDuration")},t.getAlerts=function(t){return Un.dispatch("alert/getAlerts",{params:t})},t.getAlertCount=function(){return Un.dispatch("alert/getAlertCount")},t}}})}},Jn={install:function(t){t.mixin({computed:{$events:function(){var t=Un.getters["eventHistory/history"];return t.createEvent=function(t){return Un.dispatch("eventHistory/createEvent",{event:t})},t.setEvents=function(t){return Un.dispatch("eventHistory/setEvents",{events:t})},t.setYesterdaysEvents=function(){return Un.dispatch("eventHistory/setYesterdaysEvents",{})},t.updateEvent=function(t){return Un.dispatch("eventHistory/updateEvent",{event:t})},t.getAllEvents=function(){return Un.dispatch("eventHistory/getAllEvents",{})},t.getFiftyEvents=function(){return Un.dispatch("eventHistory/getFiftyEvents",{})},t.getEventsCount=function(){return Un.dispatch("eventHistory/getEventsCount",{})},t.getArchivedEvents=function(t){return Un.dispatch("eventHistory/getArchivedEvents",{params:t})},t.getArchivedEventsByType=function(t){return Un.dispatch("eventHistory/getArchivedEventsByType",{params:t})},t.listenForEventsChanges=function(){return Un.dispatch("eventHistory/listenForEventsChanges",{})},t.startLoading=function(){return Un.dispatch("eventHistory/startLoading",{})},t.stopLoading=function(){return Un.dispatch("eventHistory/stopLoading",{})},t}}})}},Xn={bind:function(t,e){if(!e.value)throw new Error("Custom directive 'v-trim' is missing a required value.");t&&t.textContent.length>e.value&&(t.textContent=t.textContent.substring(0,e.value)+"...")}},Qn={bind:function(t,e){if(!e.value)throw new Error("Custom directive 'v-test-ref' is missing a required value.");t&&t.setAttribute("app-test-ref",e.value)}},ta={bind:function(t,e){ea(t,e)},update:function(t,e){ea(t,e)}},ea=function(t,e){if(t&&e.value){t.style.backgroundColor="red";var n=!0,a=0,r=setInterval(function(){a+=1,11===a?clearInterval(r):n?(t.classList.remove("error"),n=!n,t.style.backgroundColor="#FFF",t.style.borderColor="#FFF",t.style.color="red"):(n=!n,t.style.backgroundColor="red",t.style.borderColor="red",t.style.color="#FFF")},200)}else t&&(t.style.backgroundColor=null)};n("fda2"),n("7e6a");o.a.initializeApp({apiKey:"AIzaSyA9MCMFIt8lktFw3tNXnz-gGX3_Z-bJNMM",authDomain:"wiley-app-rotf.firebaseapp.com",databaseURL:"https://wiley-app-rotf.firebaseio.com",projectId:"wiley-app-rotf",storageBucket:"wiley-app-rotf.appspot.com",messagingSenderId:"605895775958",appId:"1:605895775958:web:9cfcc726493bd0d8"}),a["default"].config.productionTip=!1,a["default"].use(Gn),a["default"].use(Zn),a["default"].use(Jn),a["default"].use(Wn),a["default"].directive("trim",Xn),a["default"].directive("test-ref",Qn),a["default"].directive("flash",ta),new a["default"]({router:Bn,store:Un,render:function(t){return t(M)}}).$mount("#app")},"61db":function(t,e){},"655c":function(t,e,n){},"6dbb":function(t,e,n){},"6f8b":function(t,e,n){"use strict";var a=n("ff02"),r=n.n(a);r.a},"7e6a":function(t,e,n){},"7fe14":function(t,e,n){"use strict";var a=n("655c"),r=n.n(a);r.a},83629:function(t,e,n){"use strict";var a=n("3ee0"),r=n.n(a);r.a},9244:function(t,e,n){"use strict";var a=n("bca7"),r=n.n(a);r.a},9796:function(t,e){},"9f27":function(t,e,n){"use strict";var a=n("c71d"),r=n.n(a);r.a},"9f2b":function(t,e){},"9f43":function(t,e,n){},"9f96":function(t,e){},a4f9:function(t,e){},a7c3:function(t,e,n){"use strict";var a=n("e931"),r=n.n(a);r.a},a99b:function(t,e,n){},ad79:function(t,e,n){},b25a:function(t,e,n){"use strict";var a=n("edd4"),r=n.n(a);r.a},b340:function(t,e,n){"use strict";var a=n("1d4e"),r=n.n(a);r.a},b370:function(t,e,n){"use strict";var a=n("b8f5"),r=n.n(a);r.a},b6fc:function(t,e,n){},b7c1:function(t,e,n){"use strict";var a=n("a99b"),r=n.n(a);r.a},b8f5:function(t,e,n){},bca7:function(t,e,n){},bff1:function(t,e,n){"use strict";var a=n("6dbb"),r=n.n(a);r.a},c6bf:function(t,e,n){},c71d:function(t,e,n){},df95:function(t,e){},e4f6:function(t,e){},e931:function(t,e,n){},edd4:function(t,e,n){},eed5:function(t,e,n){"use strict";var a=n("b6fc"),r=n.n(a);r.a},ff02:function(t,e,n){}});
//# sourceMappingURL=app~f075b844.dc7c0c40.js.map