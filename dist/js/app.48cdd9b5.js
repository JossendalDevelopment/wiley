(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)s=o[d],r[s]&&m.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},"1aa8":function(t,e){},"2fcb":function(t,e){},"48df":function(t,e,a){"use strict";var n=a("5772"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("744f"),a("6c7b"),a("7514"),a("20d6"),a("1c4c"),a("6762"),a("cadf"),a("e804"),a("55dd"),a("d04f"),a("c8ce"),a("217b"),a("7f7f"),a("f400"),a("7f25"),a("536b"),a("d9ab"),a("f9ab"),a("32d7"),a("25c9"),a("9f3c"),a("042e"),a("c7c6"),a("f4ff"),a("049f"),a("7872"),a("a69f"),a("0b21"),a("6c1a"),a("c7c62"),a("84b4"),a("c5f6"),a("2e37"),a("fca0"),a("7cdf"),a("ee1d"),a("b1b1"),a("87f3"),a("9278"),a("5df2"),a("04ff"),a("f751"),a("4504"),a("fee7"),a("ffc1"),a("0d6d"),a("9986"),a("8e6e"),a("25db"),a("e4f7"),a("b9a1"),a("64d5"),a("9aea"),a("db97"),a("66c8"),a("57f0"),a("165b"),a("456d"),a("cf6a"),a("fd24"),a("8615"),a("551c"),a("097d"),a("df1b"),a("2397"),a("88ca"),a("ba16"),a("d185"),a("ebde"),a("2d34"),a("f6b3"),a("2251"),a("c698"),a("a19f"),a("9253"),a("9275"),a("3b2b"),a("3846"),a("4917"),a("a481"),a("28a5"),a("386d"),a("6b54"),a("4f7f"),a("8a81"),a("ac4d"),a("8449"),a("9c86"),a("fa83"),a("48c0"),a("a032"),a("aef6"),a("d263"),a("6c37"),a("9ec8"),a("5695"),a("2fdb"),a("d0b0"),a("5df3"),a("b54a"),a("f576"),a("ed50"),a("788d"),a("14b9"),a("f386"),a("f559"),a("1448"),a("673e"),a("242a"),a("c66f"),a("b05c"),a("34ef"),a("6aa2"),a("15ac"),a("af56"),a("b6e4"),a("9c29"),a("63d9"),a("4dda"),a("10ad"),a("c02b"),a("4795"),a("130f"),a("ac6a"),a("96cf");var n=a("2b0e"),r=a("8aa5"),i=a.n(r),s=a("ce5b"),o=a.n(s);a("bf40");n["default"].use(o.a,{theme:{primary:"#e2e2e2",primaryDark:"#cccccc",secondary:"#424242",accent:"#d42017",error:"#FF4F65",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},options:{customProperties:!0},iconfont:"fa"});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-alert",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","padding-right":"2rem"},attrs:{color:"error",light:"",transition:"slide-y-transition",dismissible:""},model:{value:t.$cameraAlert.active,callback:function(e){t.$set(t.$cameraAlert,"active",e)},expression:"$cameraAlert.active"}},[a("p",{staticClass:"text-xs-center mb-0 headline",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.push({name:"cam_details",params:{id:t.$cameraAlert.alertData.cameraId}})}}},[t._v(t._s(t.formatAlertText))])]),a("v-app",{attrs:{id:"inspire"}},[t.$auth.status.loggedIn?a("v-toolbar",{attrs:{app:"",flat:"",absolute:""}},[a("v-toolbar-items",{staticStyle:{position:"relative","margin-right":"60px"}},[a("v-img",{staticStyle:{width:"60px",height:"50px",position:"absolute",bottom:"-1px",left:"0px"},attrs:{contain:"",src:"/assets/images/wiley_demo_header_icon.png"},on:{click:function(e){return t.$router.push("/")}}})],1),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.$auth.status.loggedIn?a("v-btn",{attrs:{to:"/",flat:""}},[t._v("Home")]):t._e()],1),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.$auth.status.loggedIn?a("v-btn",{attrs:{to:"/overview",flat:""}},[t._v("Feed")]):t._e()],1),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t.$auth.status.loggedIn?a("v-btn",{attrs:{to:"/history",flat:""}},[t._v("History")]):t._e()],1),a("v-spacer"),a("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("span",[t._v("Status: ")]),a("v-btn",t._g({attrs:{color:"white"},on:{click:function(e){return t.toggleOperationsStatus()}}},n),[t._v("\n                        "+t._s(t.operationsStatus.name)+"\n                        "),a("v-icon",{staticClass:"pl-1"},[t._v("fas fa-caret-down")])],1)]}}],null,!1,1024839677)}),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-xs-and-down"},[t.$auth.status.loggedIn?a("v-btn",{attrs:{color:"accent"},on:{click:function(e){return t.simulateAlert()}}},[t._v("Simulate alert")]):t._e()],1),a("v-toolbar-items",[t.$auth.status.loggedIn?a("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{flat:""}},n),[t._v("\n                            "+t._s(t.$auth.user.email)+"\n                            "),a("v-icon",{staticClass:"pl-1"},[t._v("fas fa-caret-down")])],1)]}}],null,!1,1816198400)},[a("v-list",t._l(3,function(e){return a("v-list-tile",{key:e,on:{click:function(){return null}}},[a("v-list-tile-title",[t._v(t._s(e))])],1)}),1)],1):t._e()],1),a("v-toolbar-items",{staticClass:"hidden-xs-and-down"},[t.$auth.status.loggedIn?a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.logout()}}},[t._v("Logout")]):t._e()],1)],1):t._e(),a("v-content",{attrs:{app:""}},[a("v-container",{attrs:{fluid:"","fill-height":"",primary:"","pa-0":""}},[a("router-view")],1)],1),a("notifications",{attrs:{max:1,position:"bottom right",duration:4e3,group:"app-notifications"},scopedSlots:t._u([{key:"body",fn:function(e){return a("div",{},[a("v-alert",{staticStyle:{"border-radius":"10px","margin-right":"5%","margin-bottom":"5%"},attrs:{color:e.item.type,dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n                    "+t._s(e.item.text)+"\n                ")])],1)}}])})],1)],1)},l=[],u=a("a34a"),d=a.n(u);function m(t){Object.assign(this,m.template,t)}Object.defineProperty(m,"template",{get:function(){return{id:"",status:"",type:"",detectedObject:"",probability:"",startTime:"",endTime:"",duration:"",cameraId:null,camNumber:null,camName:"",name:"",sourceData:{src:"",type:""}}}});var f=m;function p(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(n,r)}function v(t){return function(){var e=this,a=arguments;return new Promise(function(n,r){var i=t.apply(e,a);function s(t){p(i,n,r,s,o,"next",t)}function o(t){p(i,n,r,s,o,"throw",t)}s(void 0)})}}var g={name:"App",props:{},data:function(){return{alert:!0,operationsStatus:{code:1,name:"Normal Operations in Progress"}}},computed:{formatAlertText:function(){var t=this.$cameraAlert.alertData;return"1 ".concat(t.detectedObject," identified in ").concat(t.camName)}},methods:{logout:function(){var t=v(d.a.mark(function t(){return d.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$auth.logout();case 2:this.$router.replace("/sign_in");case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toggleOperationsStatus:function(){1===this.operationsStatus.code?this.operationsStatus={code:2,name:"Off Operations"}:this.operationsStatus={code:1,name:"Normal Operations in Progress"}},simulateAlert:function(){var t=new f({id:"01",type:"motion",detectedObject:"coyote",probability:"95%",startTime:Date.now(),endTime:function(){var t=new Date;return t.setMinutes(t.getMinutes()+1),new Date(t)}(),duration:60,cameraId:100,camNumber:1,camName:"Rail-EAST",status:"active",sourceData:{src:"https://app.coverr.co/s3/mp4/Deserted%20Island.mp4",type:"video/mp4"},staticImage:"/assets/images/ref_raileast.jpg"});this.$cameraAlert.createAlert(t)}}},h=g,b=(a("034f"),a("2877")),y=a("a4f9"),_=a.n(y),w=Object(b["a"])(h,c,l,!1,null,null,null);"function"===typeof _.a&&_()(w);var x=w.exports,k=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"test-ref"},[a("V-flex",{attrs:{xs3:""}},[t.working?t._e():a("video--controls",{attrs:{stream:t.stream,events:t.parseEvents}})],1),a("v-flex",{attrs:{xs9:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs10:""}},[a("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.parseTime))]),a("v-layout",{attrs:{"justify-end":""}},[a("v-icon",[t._v("fas fa-flag")]),a("v-btn",{attrs:{flat:""}},[t._v("Flag for further review")])],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:"","align-start":"","justify-center":""}},[a("v-flex",{staticClass:"video-feed-wrapper",attrs:{xs10:""}},[a("dummy-camera-image",{attrs:{source:t.stream.staticImage}}),a("v-layout",{staticClass:"controls",attrs:{"align-start":"","justify-end":""}},[a("div",{staticStyle:{display:"flex","align-items":"center",padding:"10px"},style:"background-color:rgba(222,222,222,0.3)"},[a("div",{staticClass:"live-icon"}),a("p",{staticClass:"pl-2 mb-0 test-ref primary--text"},[t._v("\n                            Live Feed\n                        ")])])])],1),a("v-flex",{attrs:{xs10:""}},[a("v-layout",{attrs:{"justify-center":""}})],1),a("v-flex",{attrs:{xs10:""}},[a("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[a("p",{staticClass:"pl-3 mb-0"},[t._v(t._s(t.formatProbabilityText))]),a("v-btn",{staticClass:"secondary btn",on:{click:function(e){return t.openConfirmModal()}}},[t._v("\n                        Categorize\n                    ")])],1)],1)],1)],1),a("app-dialog",{ref:"confirm",attrs:{"max-width":"500"}},[a("template",{slot:"modaltitle"},[t._v("\n            Confirm?\n        ")]),a("template",{slot:"modalcontent"},[a("div",[t._v("Confirm this is a "+t._s(t.$cameraAlert.alertData.detectedObject)+"?")])]),a("v-btn",{attrs:{slot:"detailsButton",color:"success"},on:{click:function(e){return t.confirmObject()}},slot:"detailsButton"},[t._v("Confirm")])],2),a("app-dialog",{ref:"falsealarm",attrs:{"max-width":"500"}},[a("template",{slot:"modaltitle"},[t._v("\n            Confirm?\n        ")]),a("template",{slot:"modalcontent"},[a("div",[t._v("Register this event as a false alarm?")])]),a("v-btn",{attrs:{slot:"detailsButton",color:"success"},on:{click:function(e){return t.falseAlarm()}},slot:"detailsButton"},[t._v("Confirm")])],2)],1)},O=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticStyle:{height:"100%","background-color":"#FFF"},attrs:{column:""}},[a("v-layout",{staticStyle:{"max-height":"60px"},attrs:{"justify-space-between":"","align-center":"","px-4":"","py-3":""}},[a("date-picker")],1),a("v-tabs",{attrs:{centered:"",grow:"","slider-color":"secondary"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(["New","Reviewed"],function(e){return a("v-tab",{key:e},[a("v-badge",{attrs:{color:"error"},scopedSlots:t._u(["New"==e?{key:"badge",fn:function(){return[t._v("\n                    "+t._s(t.events.length)+"\n                ")]},proxy:!0}:null],null,!0)},[a("span",[t._v(t._s(e))])])],1)}),1),a("v-tabs-items",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(["new","reviewed"],function(e){return a("v-tab-item",{key:e},[t.working?t._e():a("v-list",t._l(t.items,function(e){return a("v-list-group",{key:e.title,attrs:{"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e[0])+" - "+t._s(e[1].length))])],1)],1)]},proxy:!0}],null,!0),model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},t._l(e[1],function(e){return a("v-list-tile",{key:e.title,staticClass:"nested-list-item",on:{click:function(){}}},[a("v-list-tile-action",[a("span",{style:"color:"+t.$vuetify.theme.error},[t._v(t._s(e.id))])]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.startTime)+" - "+t._s(e.endTime))])],1),a("v-list-tile-action",[a("span",{staticStyle:{"font-size":".8rem"}},[t._v("("+t._s(e.duration)+" sec)")])])],1)}),1)}),1)],1)}),1)],1)},I=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-layout",{attrs:{"align-center":"","justify-space-around":""}},[a("v-icon",{on:{click:function(e){return t.decrementDay()}}},[t._v("fas fa-chevron-left")]),a("h4",[t._v(t._s(t.date))]),a("v-icon",t._g({},n),[t._v("far fa-calendar-alt")]),a("v-icon",{on:{click:function(e){return t.incrementDay()}}},[t._v("fas fa-chevron-right")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"secondary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{flat:"",color:"secondary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1)],1)},A=[],E=a("8946"),$=a.n(E),C=a("e2ff"),D=a.n(C),N={data:function(){return{date:(new Date).toISOString().substr(0,10),menu:!1}},methods:{incrementDay:function(){var t=$()(new Date(this.date),1);this.date=t.toISOString().substr(0,10)},decrementDay:function(){var t=D()(new Date(this.date),1);this.date=t.toISOString().substr(0,10)}},watch:{date:function(){console.log("New date",this.date)}}},R=N,P=Object(b["a"])(R,T,A,!1,null,null,null),F=P.exports,L={components:{"date-picker":F},props:{events:{type:Array,required:!0}},data:function(){return{currentTab:null,working:!0,items:[]}},mounted:function(){var t=this.groupBy(this.events,function(t){return t.detectedObject});this.items=t,this.working=!1},methods:{groupBy:function(t,e){var a=new Map;return t.forEach(function(t){var n=e(t),r=a.get(n);r?r.push(t):a.set(n,[t])}),a}}},M=L,q=(a("48df"),a("2fcb")),z=a.n(q),B=Object(b["a"])(M,S,I,!1,null,null,null);"function"===typeof z.a&&z()(B);var W=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-img",{attrs:{src:t.getPath()}})},V=[],Y={props:{source:{type:String,required:!1,default:""}},methods:{getPath:function(){return this.source}}},U=Y,J=Object(b["a"])(U,H,V,!1,null,null,null),K=J.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{ref:"dialog",attrs:{persistent:t.isLoading||t.persistent,lazy:t.lazy,"max-width":t.maxWidth},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("v-dialog",{attrs:{lazy:"",persistent:"","fill-height":"","content-class":"elevation-0"},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("p",{staticClass:"text-xs-center pt-4"},[a("v-progress-circular",{attrs:{size:70,width:7,indeterminate:"",lazy:"",color:"white"}})],1)]),t._t("default",[a("v-card",{style:{backgroundColor:t.$vuetify.theme.primary}},[t.isLoading||t.persistent?t._e():a("v-icon",{staticClass:"right mt-3 mr-3",attrs:{large:""},on:{click:function(e){return e.stopPropagation(),t.close(e)}}},[t._v("\n            far fa-times-circle\n        ")]),a("span",{staticClass:"right mt-3 mr-3",staticStyle:{display:"inline-block"}},[t._t("leftofclose")],2),a("v-card-title",[a("h2",{staticStyle:{display:"inline"}},[t._t("modaltitle")],2)]),a("v-card-text",[t._t("modalcontent")],2),a("v-card-actions",[t._t("cancelbutton"),a("span",{staticClass:"ml-2"},[t.isLoading?t._e():t._t("actionbuttons")],2),a("v-spacer"),a("span",{attrs:{right:""}},[t._t("detailsButton")],2)],2)],1)])],2)},G=[],X={props:{persistent:{type:Boolean,required:!1,default:!1},lazy:{type:Boolean,required:!1,default:!1},maxWidth:{type:String,required:!1,default:void 0}},data:function(){return{isOpen:!1,isLoading:!1}},methods:{open:function(){this.isOpen=!0,this.$emit("opened")},close:function(){this.isOpen=!1,this.$emit("closed")},startLoading:function(){this.isLoading=!0},stopLoading:function(){this.isLoading=!1}}},Z=X,tt=Object(b["a"])(Z,Q,G,!1,null,null,null),et=tt.exports,at=a("70f2"),nt=a.n(at),rt=a("b429"),it=a("89b3"),st={components:{"video--controls":W,"dummy-camera-image":K,"app-dialog":et},data:function(){return{stream:{},events:it,working:!0,videoOptions:{autoplay:!0,controls:!0,responsive:!0,aspectRatio:"16:9",fill:!0,muted:!0,language:"en",playbackRates:[.5,1,1.5,2],sources:[]}}},mounted:function(){var t=this;this.stream=rt.find(function(e){return e.id==t.$route.params.id}),this.working=!1,this.setVideoOptions()},methods:{setVideoOptions:function(){this.videoOptions.sources=[this.stream.sourceData]},openConfirmModal:function(){this.$refs.confirm.open()},openFalseAlarmModal:function(){this.$refs.falsealarm.open()},falseAlarm:function(){this.$cameraAlert.clearAlert(),this.$router.replace("/overview")},confirmObject:function(){this.$eventHistory.createEvent(this.$cameraAlert.alertData)}},computed:{parseTime:function(){return nt()(new Date,"MM/DD/YYYY   hh:mm:ss")},parseEvents:function(){var t=this;return this.events.events.filter(function(e){return e.camId==t.stream.id})},getVideoOptions:function(){return this.videoOptions},formatProbabilityText:function(){return"Identified: ".concat(this.$cameraAlert.alertData.detectedObject," (confidence ").concat(this.$cameraAlert.alertData.probability,")")}}},ot=st,ct=(a("6d9b"),a("63bd")),lt=a.n(ct),ut=Object(b["a"])(ot,j,O,!1,null,"22f98b37",null);"function"===typeof lt.a&&lt()(ut);var dt=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":"","fill-height":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-start":""}},t._l(t.streams,function(e){return a("v-flex",{key:e.id,attrs:{xs6:""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title mx-auto"},[t._v(t._s(e.camName))])]),a("video-live-feed",{attrs:{stream:e}}),a("video-history",{attrs:{stream:e,events:t.parseEvents(e)}})],1)],1)}),1)],1)},ft=[],pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-hover",[a("v-flex",{staticClass:"video-feed-wrapper pa-0"},[a("dummy-camera-image",{attrs:{source:t.stream.staticImage}})],1)],1)},vt=[],gt={components:{"dummy-camera-image":K},props:{stream:{type:Object,required:!0}},data:function(){return{cameras:{},cameraData:{},video:null,canvas:null,videoOptions:{autoplay:!0,controls:!1,responsive:!0,aspectRatio:"16:9",fill:!0,muted:!0,language:"en",playbackRates:[.5,1,1.5,2],sources:[]}}},beforeDestroy:function(){this.video=null},methods:{getVideoOptions:function(){return this.videoOptions.sources=[this.stream.sourceData],this.videoOptions}}},ht=gt,bt=(a("aac7"),a("7e19")),yt=a.n(bt),_t=Object(b["a"])(ht,pt,vt,!1,null,"34005685",null);"function"===typeof yt.a&&yt()(_t);var wt=_t.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{attrs:{fab:"",small:"",color:"error"},on:{click:function(e){t.dialog=!t.dialog}}},[a("span",{staticStyle:{"font-size":"1.4rem"}},[t._v(t._s(t.events.length))])]),a("span",{staticClass:"title"},[t._v("Alerts")]),a("v-spacer"),a("v-btn",{staticClass:"ml-auto",attrs:{small:"",outline:""},on:{click:function(e){return t.$router.push({name:"cam_details",params:{id:t.stream.id}})}}},[t._v("\n            View Details\n        ")])],1),a("v-list",{staticClass:"py-0"},[t._l(t.items,function(e,n){return[a("v-list-tile",{key:e.title,attrs:{ripple:""},on:{click:function(){}}},[a("v-list-tile-action",[a("p",{staticClass:"mb-0 title",style:"color:"+(e.count?t.$vuetify.theme.error:"black")},[t._v("\n                    "+t._s(e.count)+"\n                ")])]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))])],1)],1),n+1<t.items.length?a("v-divider",{key:n}):t._e()]})],2)],1)},kt=[],jt={props:{stream:{type:Object,required:!0},events:{type:Array,required:!0}},mounted:function(){var t=this.groupBy(this.events,function(t){return t.detectedObject});this.items.forEach(function(e){e.count=t.get(e.title)?t.get(e.title).length:0})},data:function(){return{selected:[2],items:[{action:"15 min",title:"Person",count:null},{action:"2 hr",title:"Coyote",count:null},{action:"6 hr",title:"Rail Car(Loading)",count:null},{action:"12 hr",title:"Rail Car(Moving)",count:null},{action:"18hr",title:"Operations/Maintenance Inspection",count:null}],timer:null}},methods:{groupBy:function(t,e){var a=new Map;return t.forEach(function(t){var n=e(t),r=a.get(n);r?r.push(t):a.set(n,[t])}),a},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1},300)}}},Ot=jt,St=Object(b["a"])(Ot,xt,kt,!1,null,null,null),It=St.exports,Tt={components:{"video-live-feed":wt,"video-history":It},data:function(){return{captures:[],streams:rt,events:it}},methods:{parseEvents:function(t){return this.events.events.filter(function(e){return e.camId==t.id})}}},At=Tt,Et=a("1aa8"),$t=a.n(Et),Ct=Object(b["a"])(At,mt,ft,!1,null,null,null);"function"===typeof $t.a&&$t()(Ct);var Dt=Ct.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",[a("v-toolbar",{attrs:{color:"primary darken-1"}},[a("v-toolbar-title",{staticClass:"pl-2"},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("Event Logs")])]),a("v-spacer"),a("v-text-field",{staticClass:"hidden-sm-and-down",attrs:{flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"fas fa-search",label:"Search"}})],1),a("v-list",t._l(t.events,function(e){return a("v-list-tile",{key:e.id},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.id)+" - "+t._s(e.status)+" - "+t._s(new Date(e.startTime))+" - "+t._s(e.detectedObject)+" - "+t._s(e.probability))])],1)],1)}),1)],1)],1)],1)},Rt=[],Pt={data:function(){return{events:[]}},mounted:function(){var t=this;this.$eventHistory.getAllEvents().then(function(e){t.events=e.data})}},Ft=Pt,Lt=Object(b["a"])(Ft,Nt,Rt,!1,null,null,null),Mt=Lt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":"","pa-0":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{staticStyle:{height:"100%"},style:"background-color:"+t.$vuetify.theme.primary,attrs:{xs1:""}}),a("v-flex",{staticStyle:{"background-color":"#FFFFFF",height:"100%"},attrs:{xs4:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":"","fill-height":""}},[a("v-img",{attrs:{"max-width":"80%",src:"/assets/images/wiley_demo_logo.png"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm7:"","px-5":""}},[a("v-layout",{class:t.$vuetify.breakpoint.smAndUp?"justify-start":"justify-center"},[a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-card",{attrs:{flat:"",color:"primary"}},[a("v-toolbar",{attrs:{flat:"",color:"primary"}},[a("v-toolbar-title",{staticClass:"title mx-auto"},[t._v("Welcome!")])],1),a("v-card-text",{staticClass:"py-0"},[a("v-form",[a("v-label",[t._v("Company Email Address")]),a("v-text-field",{attrs:{outline:"",color:"primary darken-4",name:"employeeEmail",label:"admin@email.com",type:"text"},model:{value:t.employeeEmail,callback:function(e){t.employeeEmail=e},expression:"employeeEmail"}}),a("v-label",[t._v("Password")]),a("v-text-field",{attrs:{outline:"",color:"primary darken-4",name:"password",label:"password",id:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",{staticClass:"px-3 text-xs-center"},[a("v-layout",{attrs:{wrap:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:"","order-sm2":""}},[a("v-btn",{staticClass:"px-5",staticStyle:{width:"100%"},attrs:{loading:t.$auth.status.loggingIn,color:"secondary"},on:{click:function(e){return t.login()}}},[t._v("Sign In")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-checkbox",{attrs:{color:"accent"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[t._v(" Remember Me ")])]},proxy:!0}]),model:{value:t.remember,callback:function(e){t.remember=e},expression:"remember"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{to:"",flat:""}},[t._v("Forgot your password?")])],1)],1)],1)],1)],1)],1)],1)},zt=[],Bt={data:function(){return{employeeEmail:"",password:"",remember:!1}},methods:{login:function(){var t=this;this.$auth.login(this.employeeEmail,this.password).then(function(e){500!==e.status?t.$router.replace("/"):t.$notifyError("Invalid email and/or password")})}}},Wt=Bt,Ht=Object(b["a"])(Wt,qt,zt,!1,null,"098e8754",null),Vt=Ht.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"min-height":"250px",color:"primary"}},[a("v-card-title",[a("span",{staticClass:"title font-weight-bold"},[t._v("Welcome")])]),a("v-card-text",{staticClass:"headline font-weight-light"},[a("router-link",{staticStyle:{color:"black"},attrs:{to:"/overview"}},[t._v("View Camera Feed")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:""}})],1)],1)},Ut=[],Jt={data:function(){return{}},mounted:function(){}},Kt=Jt,Qt=Object(b["a"])(Kt,Yt,Ut,!1,null,null,null),Gt=Qt.exports;n["default"].use(k["a"]);var Xt=new k["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:Gt,meta:{requiresAuth:!0}},{path:"/sign_in",name:"signIn",component:Vt},{path:"/overview",name:"overview",component:Dt,meta:{requiresAuth:!0}},{path:"/cam_details/:id",name:"cam_details",component:dt,meta:{requiresAuth:!0}},{path:"/history",name:"history",component:Mt,meta:{requiresAuth:!0}},{path:"*",redirect:"/"}]});Xt.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?i.a.auth().onAuthStateChanged(function(t){t?a():a("/sign_in")}):a()});var Zt=a("2f62"),te=a("bfa9");function ee(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){ae(t,e,a[e])})}return t}function ae(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var ne={namespaced:!0,state:{alertData:ee({},new f),active:!1},getters:{alert:function(t){return t}},mutations:{createAlert:function(t,e){t.alertData=e.alertData,t.active=!0},clearAlert:function(t){t.alertData=new f,t.active=!1}},actions:{createAlert:function(t,e){var a=t.commit;a("createAlert",e)},clearAlert:function(t){var e=t.commit;e("clearAlert")}}},re=a("bc3a"),ie=a.n(re),se=ie.a.create();se.token=window.localStorage.getItem("token")||null,se.new=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.defaults.baseURL=e,this.token&&(this.tokenInterceptor=this.interceptors.request.use(function(e){return e.headers["Authorization"]="Bearer "+t.token,e}))},se.login=function(t,e){var a=this;return this.post("/login",{employeeEmail:t,password:e}).then(function(t){console.log("Server response",t);var e=t.data;return e.data.token&&(window.localStorage.setItem("user",JSON.stringify(e.data)),window.localStorage.setItem("token",e.data.token),a.tokenInterceptor=a.interceptors.request.use(function(t){return t.headers["Authorization"]="Bearer "+e.data.token,t})),t.data}).catch(function(t){return t})},se.logout=function(){this.token=null,this.interceptors.request.eject(this.tokenInterceptor),window.localStorage.removeItem("token"),window.localStorage.removeItem("user")};var oe=se,ce=a("59ca"),le=a.n(ce);a("ea7b");oe.new("/api");var ue=JSON.parse(localStorage.getItem("user")),de=ue?{status:{loggedIn:!0},user:ue}:{status:{},user:null},me={namespaced:!0,state:de,getters:{user:function(t){return t}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginFailure:function(t){t.status={},t.user=null},logout:function(t){t.status={},t.user=null}},actions:{login:function(t,e){var a=t.commit,n=e.employeeEmail,r=e.password;return a("loginRequest",{employeeEmail:n,password:r}),le.a.auth().signInWithEmailAndPassword(n,r).then(function(t){var e={email:t.user.email,verified:t.user.emailVerified,id:t.user.uid};return window.localStorage.setItem("token",e.id),a("loginSuccess",e),e}).catch(function(t){return a("loginFailure",t),{e:t,status:500}})},logout:function(t){var e=t.commit;le.a.auth().signOut(),window.localStorage.clear(),e("logout")}}},fe=ie.a.create();fe.token=window.localStorage.getItem("token")||null,fe.new=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";this.defaults.baseURL=e,this.token&&(this.tokenInterceptor=this.interceptors.request.use(function(e){return e.headers["Authorization"]="Bearer "+t.token,e}))},fe.createEvent=function(t){return this.post("/create_event",{event:t}).then(function(t){return console.log("event service created event",t),t.data}).catch(function(t){return t})},fe.getAllEvents=function(){return this.get("/get_all_events").then(function(t){return t.data}).catch(function(t){return t})};var pe=fe;pe.new("/api");var ve={namespaced:!0,state:{history:[]},getters:{history:function(t){return t}},mutations:{createEvent:function(t,e){t.history.push(e.event)}},actions:{createEvent:function(t,e){var a=t.commit;console.log("event store action",e),a("createEvent",e),pe.createEvent(e.event).then(function(t){console.log(t)})},getAllEvents:function(){return pe.getAllEvents().then(function(t){return t})}}};n["default"].use(Zt["a"]);var ge=new Zt["a"].Store({plugins:[new te["a"]({storage:window.localStorage,modules:["authentication","cameraAlert"]}).plugin],modules:{authentication:me,cameraAlert:ne,eventHistory:ve}}),he={install:function(t){t.mixin({computed:{$auth:function(){var t=ge.getters["authentication/user"];return t.login=function(t,e){return ge.dispatch("authentication/login",{employeeEmail:t,password:e})},t.logout=function(){return ge.dispatch("authentication/logout")},t}}})}},be=a("ee98"),ye=a.n(be),_e={install:function(t){var e="app-notifications";t.use(ye.a),t.mixin({methods:{$notifyError:function(t){this.$notify({group:e,text:t,type:"error"})},$notifyInfo:function(t){this.$notify({group:e,text:t,type:"info"})},$notifySuccess:function(t){this.$notify({group:e,text:t,type:"success"})},$notifyWarn:function(t){this.$notify({group:e,text:t,type:"warning"})}}})}},we={install:function(t){t.mixin({computed:{$cameraAlert:function(){var t=ge.getters["cameraAlert/alert"];return t.createAlert=function(t){return ge.dispatch("cameraAlert/createAlert",{alertData:t})},t.clearAlert=function(){return ge.dispatch("cameraAlert/clearAlert")},t}}})}},xe={install:function(t){t.mixin({computed:{$eventHistory:function(){var t=ge.getters["eventHistory/history"];return t.createEvent=function(t){return ge.dispatch("eventHistory/createEvent",{event:t})},t.getAllEvents=function(){return ge.dispatch("eventHistory/getAllEvents",{})},t}}})}};a("fda2");i.a.initializeApp({apiKey:"AIzaSyC14MMLeymY_W_9a-Qoc8bYQji55tUm0Ak",authDomain:"wiley-app.firebaseapp.com",databaseURL:"https://wiley-app.firebaseio.com",projectId:"wiley-app",storageBucket:"wiley-app.appspot.com",messagingSenderId:"918656739220",appId:"1:918656739220:web:46326f33d145a55f"}),n["default"].config.productionTip=!1,n["default"].use(he),n["default"].use(we),n["default"].use(xe),n["default"].use(_e),new n["default"]({router:Xt,store:ge,render:function(t){return t(x)}}).$mount("#app")},5772:function(t,e,a){},"63bd":function(t,e){},"64a9":function(t,e,a){},"6d9b":function(t,e,a){"use strict";var n=a("ad51"),r=a.n(n);r.a},"7e19":function(t,e){},"89b3":function(t){t.exports={events:[{id:"01",status:"active",type:"person",detectedObject:"Person",probability:"84%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"02",status:"active",type:"person",detectedObject:"Person",probability:"82%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"03",status:"active",type:"person",detectedObject:"Person",probability:"94%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"04",status:"active",type:"person",detectedObject:"Person",probability:"91%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"05",status:"active",type:"person",detectedObject:"Person",probability:"97%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"06",status:"active",type:"person",detectedObject:"Person",probability:"94%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"07",status:"active",type:"person",detectedObject:"Person",probability:"90%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"08",status:"active",type:"railcar-loading",detectedObject:"Rail Car(Loading)",probability:"87%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"09",status:"active",type:"railcar-loading",detectedObject:"Rail Car(Loading)",probability:"99%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"10",status:"active",type:"railcar-loading",detectedObject:"Rail Car(Loading)",probability:"88%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"11",status:"active",type:"railcar-moving",detectedObject:"Rail Car(Moving)",probability:"87%",startTime:"159",endTime:"200",duration:"41",camId:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_raileast.jpg"},{id:"12",status:"active",type:"person",detectedObject:"Person",probability:"99%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"13",status:"active",type:"person",detectedObject:"Person",probability:"78%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"14",status:"active",type:"person",detectedObject:"Person",probability:"83%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"15",status:"active",type:"railcar-loading",detectedObject:"Rail Car(Loading)",probability:"80%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"16",status:"active",type:"railcar-loading",detectedObject:"Rail Car(Loading)",probability:"77%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"17",status:"active",type:"railcar-moving",detectedObject:"Rail Car(Moving)",probability:"68%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"},{id:"18",status:"active",type:"coyote",detectedObject:"Coyote",probability:"100%",startTime:"159",endTime:"200",duration:"41",camId:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"",type:""},staticImage:"/assets/images/ref_railwest.jpg"}]}},"8ee2":function(t,e,a){},a4f9:function(t,e){},aac7:function(t,e,a){"use strict";var n=a("8ee2"),r=a.n(n);r.a},ad51:function(t,e,a){},b429:function(t){t.exports=[{id:100,camNumber:1,camName:"Rail-EAST",sourceData:{src:"https://app.coverr.co/s3/mp4/Deserted%20Island.mp4",type:"video/mp4"},staticImage:"/assets/images/ref_raileast.jpg"},{id:200,camNumber:2,camName:"Rail-WEST",sourceData:{src:"https://app.coverr.co/s3/mp4/Deserted%20Island.mp4",type:"video/mp4"},staticImage:"/assets/images/ref_railwest.jpg"}]}});
//# sourceMappingURL=app.48cdd9b5.js.map